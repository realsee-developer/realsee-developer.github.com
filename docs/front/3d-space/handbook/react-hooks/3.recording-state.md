---
title: çŠ¶æ€å½•åˆ¶
---

> **ä¸Šä¸€ç« å›é¡¾: æ”¹å˜è§†è§’** <br/>
> - ä½ äº†è§£ä»€ä¹ˆæ˜¯ **State**, ä»¥åŠå¦‚ä½•è·å–å’Œä¿®æ”¹ã€‚<br/>
> - é€šè¿‡ **State** å®Œæˆäº†è‡ªåŠ¨ç¯è§†çš„åŠŸèƒ½ã€‚

:::tip æœ¬ç« ä½ å¯ä»¥å­¦ä¹ åˆ°

- é€šè¿‡ **State** å®Œæˆç”¨æˆ·æ“ä½œçš„å½•åˆ¶ã€‚
- é€šè¿‡ **State** è¿˜åŸç”¨æˆ·æ“ä½œç”»é¢ã€‚

:::

## å‡†å¤‡å·¥ä½œ

å’Œä¸Šä¸€ç« èŠ‚ä¸€æ ·ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªç›®å½•ï¼ˆ`src/3.recording-state`ï¼‰ä»¥åŠå¯¹åº”çš„ **html** æ–‡ä»¶ ä»¥åŠ **jsx** æˆ– **tsx** æ–‡ä»¶ã€‚

**jsx** æˆ– **tsx** æ–‡ä»¶å¯ä»¥å…ˆæ‹·è´ä¸Šä¸€ç« èŠ‚çš„å†…å®¹ã€‚

```html title="src/3.recording-state/index.html"
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>çŠ¶æ€å½•åˆ¶ | Recording state</title>
  <style>
    * { margin: 0; padding: 0; }
    html, body #app { width: 100%; height: 100%; overflow: hidden; }
  </style>
</head>
<body>
  <div id="app"></div>
  <script type="module" src="./index"></script>
</body>
</html>
```

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```js title="src/3.recording-state/useFetchWork.js"
import { useState, useEffect } from "react";
import { parseWork } from "@realsee/five";

/**
 * React Hook: é€šè¿‡ work.json çš„åœ°å€ è·å– work å¯¹è±¡
 * @param url work.json çš„æ•°æ®åœ°å€
 * @returns work å¯¹è±¡ï¼Œå¦‚æœè·å–ä¸­ï¼Œè¿”å› null
 */
 function useFetchWork(url) {
  const [work, setWork] = useState(null);
  useEffect(() => {
    setWork(null);
    fetch(url)
      .then(response => response.text())
      .then(text => setWork(parseWork(text)));
  },[url]);
  return work;
}

export { useFetchWork };
```

```js title="src/3.recording-state/useWindowDimensions.js"
import { useState, useEffect } from "react";

/**
 * è·å–å½“å‰çª—å£çš„å°ºå¯¸
 */
 function getWindowDimensions() {
  return { width: window.innerWidth, height: window.innerHeight };
}

/**
 * React Hook: è·å–å½“å‰çª—å£çš„å°ºå¯¸
 */
function useWindowDimensions() {
  const [size, setSize] = useState(getWindowDimensions);
  useEffect(() => {
    const listener = () => setSize(getWindowDimensions());
    window.addEventListener("resize", listener, false);
    return () => window.removeEventListener("resize", listener, false);
  });
  return size;
}

export { useWindowDimensions };
```

```jsx title="src/3.recording-state/ModeController.jsx"
import React from "react";
import { Five } from "@realsee/five";
import { useFiveCurrentState } from "@realsee/five/react";
import BottomNavigation from "@mui/material/BottomNavigation";
import BottomNavigationAction from "@mui/material/BottomNavigationAction";
import Paper from "@mui/material/Paper";
import DirectionsWalkIcon from "@mui/icons-material/DirectionsWalk";
import ViewInArIcon from "@mui/icons-material/ViewInAr";

/**
 * React Component: æ¨¡æ€æ§åˆ¶
 */
const ModeController = () => {
  const [state, setState] = useFiveCurrentState();
  return <Paper sx={{ position: "fixed", bottom: 0, left: 0, right: 0 }}>
    <BottomNavigation
      showLabels
      value={state.mode}
      onChange={(_, newValue) => {
        setState({ mode: newValue });
      }}
    >
      <BottomNavigationAction label="å…¨æ™¯æ¼«æ¸¸" icon={<DirectionsWalkIcon/>} value={Five.Mode.Panorama}/>
      <BottomNavigationAction label="ç©ºé—´æ€»è§ˆ" icon={<ViewInArIcon/>} value={Five.Mode.Floorplan}/>
    </BottomNavigation>
  </Paper>;
}

export { ModeController };
```

```jsx title="src/3.recording-state/LookAroundController.jsx"
import React, { useState, useEffect } from "react";
import { useFiveCurrentState } from "@realsee/five/react";
import IconButton from "@mui/material/IconButton";
import Paper from "@mui/material/Paper";
import FlipCameraAndroidIcon from "@mui/icons-material/FlipCameraAndroid";
import PauseIcon from "@mui/icons-material/Pause";

/**
 * ReactComponent: è‡ªåŠ¨ç¯è§†æŒ‰é’®
 */
const LookAroundController = () => {
  const [currentState, setState] = useFiveCurrentState();
  const [active, toggleActive] = useState(false);
  useEffect(() => {
    if (active) {
      const timer = window.setInterval(() => {
        setState(prevState => {
          return { longitude: prevState.longitude + Math.PI / 360 };
        });
      }, 16);
      return () => window.clearInterval(timer);
    }
  }, [active]);
  return <Paper sx={{ position: "fixed", top: 10, right: 10 }}>
  {active ?
    <IconButton onClick={() => toggleActive(false)}><PauseIcon/></IconButton>:
    <IconButton onClick={() => toggleActive(true)}><FlipCameraAndroidIcon/></IconButton>
  }
  </Paper>;
}

export { LookAroundController };
```

```jsx title="src/3.recording-state/App.jsx"
import React from "react";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { useFetchWork } from "./useFetchWork";
import { useWindowDimensions } from "./useWindowDimensions";
import { ModeController } from "./ModeController";
import { LookAroundController } from "./LookAroundController";

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

const FiveProvider = createFiveProvider();
const App = () => {
  const work = useFetchWork(workURL);
  const size = useWindowDimensions();
  return work && <FiveProvider initialWork={work}>
    <FiveCanvas {...size}/>
    <ModeController/>
    <LookAroundController/>
  </FiveProvider>;
};

export { App };
```

```jsx title="src/3.recording-state/index.jsx"
import React from "react";
import ReactDOM from "react-dom";
import { App } from "./App";

ReactDOM.render(<App/>, document.querySelector("#app"));

export {};
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```ts title="src/3.recording-state/useFetchWork.ts"
import { useState, useEffect } from "react";
import { Work, parseWork } from "@realsee/five";

/**
 * React Hook: é€šè¿‡ work.json çš„åœ°å€ è·å– work å¯¹è±¡
 * @param url work.json çš„æ•°æ®åœ°å€
 * @returns work å¯¹è±¡ï¼Œå¦‚æœè·å–ä¸­ï¼Œè¿”å› null
 */
 function useFetchWork(url: string) {
  const [work, setWork] = useState<Work | null>(null);
  useEffect(() => {
    setWork(null);
    fetch(url)
      .then(response => response.text())
      .then(text => setWork(parseWork(text)));
  },[url]);
  return work;
}

export { useFetchWork };
```

```ts title="src/3.recording-state/useWindowDimensions.ts"
import { useState, useEffect } from "react";

/**
 * è·å–å½“å‰çª—å£çš„å°ºå¯¸
 */
 function getWindowDimensions() {
  return { width: window.innerWidth, height: window.innerHeight };
}

/**
 * React Hook: è·å–å½“å‰çª—å£çš„å°ºå¯¸
 */
function useWindowDimensions() {
  const [size, setSize] = useState(getWindowDimensions);
  useEffect(() => {
    const listener = () => setSize(getWindowDimensions());
    window.addEventListener("resize", listener, false);
    return () => window.removeEventListener("resize", listener, false);
  });
  return size;
}

export { useWindowDimensions };
```

```tsx title="src/3.recording-state/ModeController.tsx"
import React, { FC } from "react";
import { Five, Mode } from "@realsee/five";
import { useFiveCurrentState } from "@realsee/five/react";
import BottomNavigation from "@mui/material/BottomNavigation";
import BottomNavigationAction from "@mui/material/BottomNavigationAction";
import Paper from "@mui/material/Paper";
import DirectionsWalkIcon from "@mui/icons-material/DirectionsWalk";
import ViewInArIcon from "@mui/icons-material/ViewInAr";

/**
 * React Component: æ¨¡æ€æ§åˆ¶
 */
const ModeController: FC = () => {
  const [state, setState] = useFiveCurrentState();
  return <Paper sx={{ position: "fixed", bottom: 0, left: 0, right: 0 }}>
    <BottomNavigation
      showLabels
      value={state.mode}
      onChange={(_, newValue: Mode) => {
        setState({ mode: newValue });
      }}
    >
      <BottomNavigationAction label="å…¨æ™¯æ¼«æ¸¸" icon={<DirectionsWalkIcon/>} value={Five.Mode.Panorama}/>
      <BottomNavigationAction label="ç©ºé—´æ€»è§ˆ" icon={<ViewInArIcon/>} value={Five.Mode.Floorplan}/>
    </BottomNavigation>
  </Paper>;
}

export { ModeController };
```

```tsx title="src/3.recording-state/LookAroundController.tsx"
import React, { FC, useState, useEffect } from "react";
import { useFiveCurrentState } from "@realsee/five/react";
import IconButton from "@mui/material/IconButton";
import Paper from "@mui/material/Paper";
import FlipCameraAndroidIcon from "@mui/icons-material/FlipCameraAndroid";
import PauseIcon from "@mui/icons-material/Pause";

/**
 * ReactComponent: è‡ªåŠ¨ç¯è§†æŒ‰é’®
 */
const LookAroundController: FC = () => {
  const [currentState, setState] = useFiveCurrentState();
  const [active, toggleActive] = useState(false);
  useEffect(() => {
    if (active) {
      const timer = window.setInterval(() => {
        setState(prevState => {
          return { longitude: prevState.longitude + Math.PI / 360 };
        });
      }, 16);
      return () => window.clearInterval(timer);
    }
  }, [active]);
  return <Paper sx={{ position: "fixed", top: 10, right: 10 }}>
  {active ?
    <IconButton onClick={() => toggleActive(false)}><PauseIcon/></IconButton>:
    <IconButton onClick={() => toggleActive(true)}><FlipCameraAndroidIcon/></IconButton>
  }
  </Paper>;
}

export { LookAroundController };
```

```tsx title="src/3.recording-state/App.tsx"
import React, { FC } from "react";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { useFetchWork } from "./useFetchWork";
import { useWindowDimensions } from "./useWindowDimensions";
import { ModeController } from "./ModeController";
import { LookAroundController } from "./LookAroundController";

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

const FiveProvider = createFiveProvider();
const App: FC = () => {
  const work = useFetchWork(workURL);
  const size = useWindowDimensions();
  return work && <FiveProvider initialWork={work}>
    <FiveCanvas {...size}/>
    <ModeController/>
    <LookAroundController/>
  </FiveProvider>;
};

export { App };
```

```tsx title="src/3.recording-state/index.tsx"
import React from "react";
import ReactDOM from "react-dom";
import { App } from "./App";

ReactDOM.render(<App/>, document.querySelector("#app"));

export {};
```

</TabItem>
</Tabs>


å¯åŠ¨æœåŠ¡ `npm run dev`ã€‚ å¹¶è·³è½¬åˆ°å½“å‰é¡µé¢ "http://localhost:3000/src/3.recording-state"ã€‚

:::info
è¯·æŸ¥çœ‹ä½ çš„æ§åˆ¶å°ï¼Œç«¯å£å·ä¼šå› ä¸ºä½ çš„é…ç½®ä»¥åŠå½“å‰ç«¯å£å ç”¨æƒ…å†µå˜æ›´ï¼Œè¯·å·²æ§åˆ¶å°è¾“å‡ºçš„ä¸ºå‡†ã€‚
å¦‚æœä½ ä½¿ç”¨å…¶ä»–å¼€å‘æ„å»ºå·¥å…·ï¼Œè¯·æŒ‰ç…§è‡ªå·±çš„å¼€å‘æ„å»ºå·¥å…·çš„è¦æ±‚å¯åŠ¨æœåŠ¡ã€‚
:::

## å½•åˆ¶ / å›æ”¾
> è¿™ç« æˆ‘ä»¬ç»§ç»­é€šè¿‡ **State** æ¥å®Œæˆä¸€ä¸ªæœ‰æ„æ€çš„åº”ç”¨ã€‚
æœ¬ç« æˆ‘ä»¬ä¼šå®Œæˆè¿™æ ·çš„ä¸€ä¸ªåº”ç”¨ï¼Œè®°å½•ç”¨æˆ·åœ¨é¡µé¢ä¸Šå‘ç”Ÿçš„ **State**ï¼Œå¹¶ä¸”å¯ä»¥å›æ”¾è¿™äº›æ“ä½œã€‚<br/>

### ç¼–å†™ **Recorder** ç±»
é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ **Recorder** ç±»ï¼Œæ¥æ”¯æŒè®°å½•å’Œå›æ”¾ã€‚
**Recorder** ç±» å¹¶é **Five** çš„å†…å®¹ï¼Œåªæ˜¯ä¸ºäº†è¾¾æˆæœ¬ç« çš„æ•ˆæœç¼–å†™çš„ã€‚

1. å®ç° **startRecording / endRecording** æ–¹æ³•ï¼Œç”¨äºå¼€å§‹å½•åˆ¶å’Œç»“æŸå½•åˆ¶ï¼›
2. å®ç° **record(state: State)** æ–¹æ³•ï¼Œè®°å½•å½•åˆ¶å†…å®¹ã€‚è®°å½• **startRecording / endRecording** ä¹‹é—´çš„å†…å®¹ï¼›
3. å®ç° **play(callback)** æ–¹æ³•ï¼Œç”¨äºå›æ”¾ï¼Œè°ƒç”¨ play ä¹‹åï¼Œä¼šå®‰è£… **record** çš„å†…å®¹ï¼Œä¾æ¬¡è°ƒç”¨ **callback** æ–¹æ³•ï¼Œå›æ”¾ **State**ã€‚


<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```js title="src/3.recording-state/recorder.js"
/**
 * å½•åˆ¶ç±»
 */
class Recorder {
  constructor() {
    this.startTime = 0;
    this.records = null;
  }
  /**
   * æ˜¯å¦å·²å½•åˆ¶
   */
  hasRecords() {
    return this.records !== null;
  }
  /**
   * å½•åˆ¶å…³é”®å¸§
   * @param state five çš„ state
   * @returns
   */
  record(state) {
    if (this.records === null) return;
    this.records.push({
      state: Object.assign({}, state),
      time: Date.now() - this.startTime
    });
  }
  /**
   * å¼€å§‹å½•åˆ¶
   */
  startRecording() {
    this.startTime = Date.now();
    this.records = [];
  }
  /**
   * ç»“æŸå½•åˆ¶
   */
  endRecording() {
    this.startTime = 0;
  }
  /**
   * å›æ”¾å½•åˆ¶
   * @param callback å…³é”®å¸§å›è°ƒ
   * @returns å½“å‰æ˜¯å¦æœ‰å½•åˆ¶
   */
  play(callback) {
    if (this.records === null || this.records.length === 0) return false;
    const records = this.records.slice();
    const keyframe = keyIndex => {
      const current = records[keyIndex];
      const next = records[keyIndex + 1];
      callback(current.state, next === undefined);
      if (next) {
        const delay = next.time - current.time;
        setTimeout(() => keyframe(keyIndex + 1), delay);
      }
    }
    keyframe(0);
    return true;
  }
}

export { Recorder };
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```ts title="src/3.recording-state/recorder.ts"
import { State } from "@realsee/five";

/**
 * å½•åˆ¶ç±»
 */
class Recorder {
  private records: { state: State, time: number }[] | null = null;
  private startTime: number;
  constructor() {
    this.startTime = 0;
    this.records = null;
  }
  /**
   * æ˜¯å¦å·²å½•åˆ¶
   */
  hasRecords() {
    return this.records !== null;
  }
  /**
   * å½•åˆ¶å…³é”®å¸§
   * @param state five çš„ state
   * @returns
   */
  record(state: State) {
    if (this.records === null) return;
    this.records.push({
      state: Object.assign({}, state),
      time: Date.now() - this.startTime
    });
  }
  /**
   * å¼€å§‹å½•åˆ¶
   */
  startRecording() {
    this.startTime = Date.now();
    this.records = [];
  }
  /**
   * ç»“æŸå½•åˆ¶
   */
  endRecording() {
    this.startTime = 0;
  }
  /**
   * å›æ”¾å½•åˆ¶
   * @param callback å…³é”®å¸§å›è°ƒ
   * @returns å½“å‰æ˜¯å¦æœ‰å½•åˆ¶
   */
  play(callback: (state: State, isFinal: boolean) => void) {
    if (this.records === null || this.records.length === 0) return false;
    const records = this.records.slice();
    const keyframe = (keyIndex: number) => {
      const current = records[keyIndex];
      const next = records[keyIndex + 1];
      callback(current.state, next === undefined);
      if (next) {
        const delay = next.time - current.time;
        setTimeout(() => keyframe(keyIndex + 1), delay);
      }
    }
    keyframe(0);
    return true;
  }
}

export { Recorder };
```

</TabItem>
</Tabs>


### ç¼–å†™å½•åˆ¶ç»„ä»¶

å°† **Recorder** ç±»ï¼Œå°è£…æˆ React ç»„ä»¶ã€‚

1. æ·»åŠ ä¸€ä¸ª **RecorderController** æ–‡ä»¶ï¼Œç”¨äºç¼–å†™ç»„ä»¶
2. ç»„ä»¶å†…æœ‰ä¸¤ä¸ª React state çŠ¶æ€ **recording** ä»¥åŠ **playing**ã€‚åˆ†åˆ«ä½œä¸º å½•åˆ¶ä¸­ / å›æ”¾ä¸­çš„çŠ¶æ€ã€‚
3. [`useFiveEventCallback`](https://unpkg.com/@realsee/five/docs/modules/react.html#useFiveEventCallback) å¯ä»¥è·å–åˆ° Five çš„å†…ç½®æ–¹æ³•å›è°ƒã€‚<br/>
   è¿™è¾¹æˆ‘ä»¬è°ƒç”¨ **stateChange** äº‹ä»¶ï¼Œå½“ **state** å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¼šè§¦å‘è¯¥äº‹ä»¶, è¿›è€Œå°† **State** è°ƒç”¨ `recorder.record(state)` æ–¹æ³•è®°å½•ä¸‹æ¥ã€‚<br/>
   æ›´å¤šçš„äº‹ä»¶è¯´æ˜è¯·çœ‹ [**Five** çš„äº‹ä»¶åˆ—è¡¨](https://unpkg.com/@realsee/five/docs/interfaces/five.EventCallback.html)
4. å½“å›æ”¾æŒ‰é’®è¢«æŒ‰ä¸‹åï¼Œè°ƒç”¨ `recorder.play(callback)` æ–¹æ³•ï¼Œä¼šå°†ä¹‹å‰å½•åˆ¶çš„ **state** é€æ¡è°ƒç”¨ **callback** æ–¹æ³•ï¼Œå›æ”¾è®°å½•ã€‚
5. å°†è®°å½•è°ƒç”¨ five çš„ **setState** æ–¹æ³•ï¼Œå°†å›æ”¾å†…å®¹åº”ç”¨ï¼Œä½¿å¾—ç”»é¢å˜åŒ–ã€‚


<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```jsx title="src/3.recording-state/RecorderController.jsx"
import React, { useState, useCallback } from "react";
import { useFiveEventCallback, useFiveState } from "@realsee/five/react";
import Button from "@mui/material/Button";
import IconButton from "@mui/material/IconButton";
import Paper from "@mui/material/Paper";
import FiberManualRecordIcon from "@mui/icons-material/FiberManualRecord";
import StopIcon from "@mui/icons-material/Stop";
import PlayArrowIcon from "@mui/icons-material/PlayArrow";
import { Recorder } from "./recorder";

/**
 * ReactComponent: çŠ¶æ€å½•åˆ¶
 */
const RecorderController = () => {
  const [state, setState] = useFiveState();
  const [recording, toggleRecording] = useState(false);
  const [playing, togglePlaying] = useState(false);
  const [recorder] = useState(() => new Recorder());
  const startRecording = useCallback(() => {
    recorder.startRecording();
    toggleRecording(true);
  }, [recorder]);
  const endRecording = useCallback(() => {
    recorder.endRecording();
    toggleRecording(false);
  }, [recorder]);
  const play = useCallback(() => {
    const hasRecord = recorder.play((state, isFinal) => {
      setState(state);
      togglePlaying(!isFinal);
    });
    togglePlaying(hasRecord);
  }, []);
  useFiveEventCallback("stateChange", (state) => {
    recorder.record(state);
  });
  if (recording) {
    return <Paper sx={{ position: "fixed", top: 10, left: 10 }}>
      <IconButton onClick={endRecording}><StopIcon/></IconButton>
      <Button disabled>å½•åˆ¶ä¸­</Button>
    </Paper>
  }
  if (playing) {
    return <Paper sx={{ position: "fixed", top: 10, left: 10 }}>
      <Button disabled>å›æ”¾ä¸­</Button>
    </Paper>
  }
  return <Paper sx={{ position: "fixed", top: 10, left: 10 }}>
    <IconButton onClick={startRecording}><FiberManualRecordIcon/></IconButton>
    <IconButton onClick={play}><PlayArrowIcon/></IconButton>
  </Paper>;
}

export { RecorderController };
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```tsx title="src/3.recording-state/RecorderController.ts"
import React, { useState, useCallback } from "react";
import { useFiveEventCallback, useFiveState } from "@realsee/five/react";
import Button from "@mui/material/Button";
import IconButton from "@mui/material/IconButton";
import Paper from "@mui/material/Paper";
import FiberManualRecordIcon from "@mui/icons-material/FiberManualRecord";
import StopIcon from "@mui/icons-material/Stop";
import PlayArrowIcon from "@mui/icons-material/PlayArrow";
import { Recorder } from "./recorder";

/**
 * ReactComponent: çŠ¶æ€å½•åˆ¶
 */
const RecorderController = () => {
  const [state, setState] = useFiveState();
  const [recording, toggleRecording] = useState(false);
  const [playing, togglePlaying] = useState(false);
  const [recorder] = useState(() => new Recorder());
  const startRecording = useCallback(() => {
    recorder.startRecording();
    toggleRecording(true);
  }, [recorder]);
  const endRecording = useCallback(() => {
    recorder.endRecording();
    toggleRecording(false);
  }, [recorder]);
  const play = useCallback(() => {
    const hasRecord = recorder.play((state, isFinal) => {
      setState(state);
      togglePlaying(!isFinal);
    });
    togglePlaying(hasRecord);
  }, []);
  useFiveEventCallback("stateChange", (state) => {
    recorder.record(state);
  });
  if (recording) {
    return <Paper sx={{ position: "fixed", top: 10, left: 10 }}>
      <IconButton onClick={endRecording}><StopIcon/></IconButton>
      <Button disabled>å½•åˆ¶ä¸­</Button>
    </Paper>
  }
  if (playing) {
    return <Paper sx={{ position: "fixed", top: 10, left: 10 }}>
      <Button disabled>å›æ”¾ä¸­</Button>
    </Paper>
  }
  return <Paper sx={{ position: "fixed", top: 10, left: 10 }}>
    <IconButton onClick={startRecording}><FiberManualRecordIcon/></IconButton>
    <IconButton onClick={play}><PlayArrowIcon/></IconButton>
  </Paper>;
}

export { RecorderController };
```

</TabItem>
</Tabs>


### ä½¿ç”¨çŠ¶æ€å½•åˆ¶ç»„ä»¶

æ’å…¥åˆ° **App** æ–‡ä»¶çš„ **FiveProvider** ä¸­


<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```jsx title="src/3.recording-state/App.jsx"
import React from "react";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { useFetchWork } from "./useFetchWork";
import { useWindowDimensions } from "./useWindowDimensions";
import { ModeController } from "./ModeController";
import { LookAroundController } from "./LookAroundController";
// highlight-start
import { RecorderController } from "./RecorderController";
// highlight-end

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

const FiveProvider = createFiveProvider();
const App = () => {
  const work = useFetchWork(workURL);
  const size = useWindowDimensions();
  return work && <FiveProvider initialWork={work}>
    <FiveCanvas {...size}/>
    <ModeController/>
    <LookAroundController/>
    // highlight-start
    <RecorderController/>
    // highlight-end
  </FiveProvider>;
};

export { App };
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```tsx title="src/3.recording-state/App.ts"
import React, { FC } from "react";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { useFetchWork } from "./useFetchWork";
import { useWindowDimensions } from "./useWindowDimensions";
import { ModeController } from "./ModeController";
import { LookAroundController } from "./LookAroundController";
// highlight-start
import { RecorderController } from "./RecorderController";
// highlight-end

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

const FiveProvider = createFiveProvider();
const App: FC = () => {
  const work = useFetchWork(workURL);
  const size = useWindowDimensions();
  return work && <FiveProvider initialWork={work}>
    <FiveCanvas {...size}/>
    <ModeController/>
    <LookAroundController/>
    // highlight-start
    <RecorderController/>
    // highlight-end
  </FiveProvider>;
};

export { App };
```

</TabItem>
</Tabs>


å›åˆ°ä½ çš„æµè§ˆå™¨æŸ¥çœ‹ï¼Œä¼šå‘ç°ä½ çš„é¡µé¢å·¦ä¸Šè§’å‡ºç°ä¸€ä¸ªå½•åˆ¶å’Œæ’­æ”¾æŒ‰é’®ã€‚è¯•è¯•åŠŸèƒ½æ˜¯ä¸æ˜¯ç¬¦åˆé¢„æœŸã€‚

çœŸå‰å®³ï¼Œä½ ä»¥åŠå¯ä»¥ç¼–å†™é‚£ä¹ˆå¤æ‚çš„ç¨‹åºäº†ğŸ¥³ ã€‚

## ä¸‹ä¸€ç« èŠ‚ä½ ä¼šå­¦åˆ°

:::tip ä¸‹ä¸€ç« æˆ‘ä»¬éœ€è¦å’Œä¸‰ç»´ç©ºé—´çš„æ¨¡å‹æ‰“äº¤é“äº†ã€‚

- äº†è§£ Five SDK çš„æ‰‹åŠ¿äº¤äº’ç³»ç»Ÿã€‚
- è·å–åˆ°ç‚¹çš„ä¸‰ç»´ä½ç½®ã€‚

:::
