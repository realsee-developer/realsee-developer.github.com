---
title: èµ·æ­¥
---

:::info
åœ¨ **React** æ¡†æ¶ä¸Šé€šè¿‡ **ClassComponent + HOC** æ¨¡å¼é›†æˆ **Five** å¼€å‘ï¼Œå®Œæ•´æºç ç¤ºä¾‹ï¼š[JavaScript](https://github.com/realsee-developer/five-sdk-javascript-esmodule-react-hoc-tutorial) | [TypeScript](https://github.com/realsee-developer/five-sdk-typescript-react-hoc-tutorial)ã€‚
:::


:::tip æœ¬ç« ä½ å¯ä»¥å­¦ä¹ åˆ°

 - å‡†å¤‡å¼€å‘ç¯å¢ƒã€‚
 - å¦‚ä½•å¼•å…¥ **Five** SDKã€‚
 - åœ¨å±å¹•ä¸­æ¸²æŸ“ä¸€ä¸ªä¸‰ç»´ç©ºé—´ã€‚

:::


## å‡†å¤‡å·¥ä½œ

### å¼€å‘ç¯å¢ƒ

- ä½ éœ€è¦å‡†å¤‡ä¸€ä¸ªç°ä»£æµè§ˆå™¨ã€‚

:::info
**Five** çš„æµè§ˆå™¨æ”¯æŒå¦‚ä¸‹ï¼Œè¯·è‡ªè¡Œé€‰æ‹©ä¸€ä¸ªä½ ç†Ÿæ‚‰çš„ï¼š

| Safari | Safari on iOS | Chrome | Chrome for Android | Edge  | Firefox |
| :----: | :-----------: | -----: | :----------------: | :---: | :-----: |
|  >= 9  |     >= 9      |  >= 49 |       >= 93        | >= 13 |  >= 45  |
:::

- ä½ éœ€è¦å®‰è£… [Node.js](https://nodejs.org/)ï¼Œå¹¶ä¸” `Node.js` ç‰ˆæœ¬å°½é‡ >= 12.xï¼Œä»¥è§„é¿å†å²é—ç•™çš„å…¼å®¹é—®é¢˜ã€‚

### ä½¿ç”¨å¼€å‘æ„å»ºå·¥å…·

æœ¬ç¤ºä¾‹é€šè¿‡ [Vite](https://vitejs.dev/) åˆå§‹åŒ–å¼€å‘ç¯å¢ƒã€‚ä½ å¯ä»¥é€šè¿‡ä¸‹æ–¹ä»£ç è‡ªè¡Œåˆå§‹åŒ–ã€‚

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```shell
	# npm 6.x
	npm create vite@latest my-vue-app --template react
	
	# npm 7+, extra double-dash is needed:
	npm create vite@latest my-vue-app -- --template react
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```shell
	# npm 6.x
	npm create vite@latest my-vue-app --template react-ts
	
	# npm 7+, extra double-dash is needed:
	npm create vite@latest my-vue-app -- --template react-ts
```

</TabItem>
</Tabs>

åœ¨ `src` ä¸‹å»ºç«‹æœ¬æ¬¡æ•™ç¨‹çš„ç›®å½• `src/0.getting-started`ã€‚

æ¯ä¸€ä¸ªæ•™ç¨‹å‡ä¼šåˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ä½œä¸ºè®°å½•ï¼Œä¾¿äºæ€»ç»“å’ŒæŸ¥æ‰¾ã€‚å½“è¯¾ç¨‹ç»“æŸä½ ä¼šå¾—åˆ°:

```
src
â”œâ”€â”€ 0.getting-started
â”œâ”€â”€ 1.displaying-work
â”œâ”€â”€ 2.knowing-state
...

```
è¿™æ ·çš„ç›®å½•ç»“æ„ã€‚å®Œæ•´ä»£ç æ ·ä¾‹ä¹Ÿæ˜¯è¿™æ ·çš„ç›®å½•ç»“æ„ï¼Œä½ å¯ä»¥éšæ—¶å‚è€ƒã€‚

:::tip
å¦‚æœä½ ç†Ÿæ‚‰å…¶ä»–çš„å¼€å‘æ„å»ºå·¥å…·å¦‚ `Webpack` `Snowpack` `parcel` ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»–ä»¬ã€‚
:::

### åˆ›å»º HTML æ–‡ä»¶

```html title="src/0.getting-started/index.html"
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>èµ·æ­¥ | Getting started</title>
  <!-- highlight-start -->
  <style>
    * { margin: 0; padding: 0; }
    html, body, #app { width: 100%; height: 100%; overflow: hidden; }
  </style>
  <!-- highlight-end -->
</head>
<body>
  <!-- highlight-start -->
  <div id="app"></div>
  <script type="module" src="./index"></script>
  <!-- highlight-end -->
</body>
</html>
```

ä½¿ç”¨ç›´æ¥å¼•å…¥ `<script type="module" src="./index"></script>` æ˜¯ [Vite](https://vitejs.dev/) çš„ç‰¹å¾ï¼Œ
å¦‚æœä½ ä½¿ç”¨å…¶ä»–å¼€å‘æ„å»ºå·¥å…·è¯·è‡ªè¡Œå¤„ç†ä»£ç å¼•å…¥å’Œå…¥å£æ–‡ä»¶ã€‚ æ¯”å¦‚ webpack ä¸‹ä½¿ç”¨ HtmlWebpackPlugin ç­‰ã€‚

### ä¹¦å†™æµ‹è¯•é€»è¾‘ä»£ç 

> æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„ `Hello World` æ¥ç¡®ä¿æ•´ä½“ä»£ç èƒ½å¤Ÿè·‘é€šã€‚

<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```jsx title="src/0.getting-started/index.jsx"
const app = document.querySelector("#app");
// highlight-start
app.innerHTML = "Hello World.";
// highlight-end
export {};
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```tsx title="src/0.getting-started/index.tsx"
const app = document.querySelector("#app")!;
// highlight-start
app.innerHTML = "Hello World.";
// highlight-end
export {};
```

</TabItem>
</Tabs>

æœ€åçš„ `export {};` æ˜¯å› ä¸º [Vite](https://vitejs.dev/) ä½¿ç”¨ `type="module"` å¼•å…¥çš„å…³ç³»ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½éœ€è¦æ˜¯ä¸€ä¸ª `module`, éœ€è¦ `export`ã€‚
å¦‚æœä½ ä½¿ç”¨å…¶ä»–å¼€å‘æ„å»ºå·¥å…·ï¼Œè¯·æŒ‰ç…§è‡ªå·±çš„å¼€å‘æ„å»ºå·¥å…·çš„è¦æ±‚ç¼–å†™ã€‚

å¯åŠ¨æœåŠ¡ `npm run dev`ã€‚ å¹¶è·³è½¬åˆ°å½“å‰é¡µé¢ "http://localhost:3000/src/0.getting-started/index.html"ã€‚

:::info
è¯·æŸ¥çœ‹ä½ çš„æ§åˆ¶å°ï¼Œç«¯å£å·ä¼šå› ä¸ºä½ çš„é…ç½®ä»¥åŠå½“å‰ç«¯å£å ç”¨æƒ…å†µå˜æ›´ï¼Œè¯·å·²æ§åˆ¶å°è¾“å‡ºçš„ä¸ºå‡†ã€‚
å¦‚æœä½ ä½¿ç”¨å…¶ä»–å¼€å‘æ„å»ºå·¥å…·ï¼Œè¯·æŒ‰ç…§è‡ªå·±çš„å¼€å‘æ„å»ºå·¥å…·çš„è¦æ±‚å¯åŠ¨æœåŠ¡ã€‚
:::

ç„¶åä½ ä¼šåœ¨é¡µé¢çœ‹åˆ°

```
Hello World.
```

è¿™æ ·çš„è¾“å‡ºï¼Œè¯´æ˜å¼€å‘æ„å»ºå·¥å…·çš„å·²ç»å®Œæˆã€‚

> åé¢å‡ ä¸ªç« èŠ‚å°†ä¸å†è¯¦ç»†å™è¿°ä¸Šè¿°æ­¥éª¤ï¼Œè¯·ä¸€å¹¶å®Œæˆå³å¯ã€‚

## ä» `npm` å®‰è£…ä¾èµ–åŒ…

åœ¨ä½ çš„å·¥ç¨‹ç›®å½•å®‰è£…ä¾èµ–


<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```shell
npm install @realsee/five three@0.117 react react-dom @wordpress/compose
```

ä¾èµ–éœ€è¦
- [**@realsee/five**](https://npmjs.com/@realsee/five) **Five**
- [**three**](https://npmjs.com/three) three.js æ˜¯ Five çš„ä¾èµ–å›¾å½¢/æ•°å­¦åº“ã€‚ ç›®å‰è¯·ä½¿ç”¨ 0.117.x çš„ç‰ˆæœ¬
- [**react**](https://npmjs.com/react) React æ¡†æ¶
- [**react-dom**](https://npmjs.com/react-dom) React çš„æµè§ˆå™¨ç«¯æ¸²æŸ“å™¨
- [**@wordpress/compose**](https://npmjs.com/@wordpress/compose) React HOC çš„ HOC åŒ…è£…å™¨


</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```shell
npm install @realsee/five three@0.117 react react-dom @types/react @types/react-dom @wordpress/compose
```

ä¾èµ–éœ€è¦
- [**@realsee/five**](https://npmjs.com/@realsee/five) **Five**
- [**three**](https://npmjs.com/three) three.js æ˜¯ Five çš„ä¾èµ–å›¾å½¢/æ•°å­¦åº“ã€‚ ç›®å‰è¯·ä½¿ç”¨ 0.117.x çš„ç‰ˆæœ¬
- [**react**](https://npmjs.com/react) React æ¡†æ¶
- [**react-dom**](https://npmjs.com/react-dom) React çš„æµè§ˆå™¨ç«¯æ¸²æŸ“å™¨
- [**@types/react**](https://npmjs.com/@types/react) React æ¡†æ¶çš„ typescript ç±»å‹å£°æ˜
- [**@types/react-dom**](https://npmjs.com/@types/react-dom) React çš„æµè§ˆå™¨ç«¯æ¸²æŸ“å™¨çš„ typescript ç±»å‹å£°æ˜
- [**@wordpress/compose**](https://npmjs.com/@wordpress/compose) React HOC çš„ HOC åŒ…è£…å™¨


</TabItem>
</Tabs>


## æ¸²æŸ“ä¸€ä¸ªä¸‰ç»´ç©ºé—´

æ˜¯æ—¶å€™æ¸²æŸ“ä¸€ä¸ªVRåœºæ™¯çœ‹çœ‹äº†ã€‚

### åŠ è½½ä¸‰ç»´ç©ºé—´

åˆ é™¤ä½ ä¹‹å‰çš„ `Hello World` ä»£ç ã€‚æˆ‘ä»¬æ¥é‡æ–°ç¼–å†™ã€‚
ä½ å¯ä»¥å…ˆä¸æ¸…æ¥šæ¥ä¸‹æ¥ç¼–å†™çš„ä»£ç çš„å«ä¹‰ï¼Œä½ åœ¨ä¸‹ä¸€ç« ä¼šå­¦ä¹ åˆ°ã€‚

<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```jsx title="src/0.getting-started/index.jsx"
import React, { Component, ComponentClass } from "react";
import ReactDOM from "react-dom";
import { Work, parseWork } from "@realsee/five";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { compose } from "@wordpress/compose";

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

/**
 * React HOC è·å– work
 * @param url work.json çš„åœ°å€
 */
function withFetchWork(url) {
  return function(Compnent) {
    return class extends Component {
      state = { work: null };
      componentDidMount() {
        fetch(url).then(res => res.json()).then(json => {
          this.setState({ work: parseWork(json) });
        });
      }
      render() {
        if (this.state.work === null) return null;
        return <Compnent work={this.state.work} {...this.props}/>;
      }
    }
  }
}

const FiveProvider = createFiveProvider();
const App = compose(
  withFetchWork(workURL)
)(class extends Component {
  render() {
    const { work } = this.props;
    return <FiveProvider initialWork={work}>
      <FiveCanvas width={512} height={512}/>
    </FiveProvider>;
  }
});

ReactDOM.render(<App/>, document.querySelector("#app"));

export {};
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```tsx title="src/0.getting-started/index.tsx"
import React, { Component, ComponentClass } from "react";
import ReactDOM from "react-dom";
import { Work, parseWork } from "@realsee/five";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { compose } from "@wordpress/compose";

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

/**
 * React HOC è·å– work
 * @param url work.json çš„åœ°å€
 */
function withFetchWork<P extends Record<string, any>>(url: string) {
  return function(Compnent: ComponentClass<P & { work: Work }>): ComponentClass<P> {
    return class extends Component<P, {work: Work | null}> {
      state = { work: null };
      componentDidMount() {
        fetch(url).then(res => res.json()).then(json => {
          this.setState({ work: parseWork(json) });
        });
      }
      render() {
        if (this.state.work === null) return null;
        return <Compnent work={this.state.work} {...this.props}/>;
      }
    }
  }
}

const FiveProvider = createFiveProvider();
const App = compose(
  withFetchWork(workURL)
)(class extends Component<{work: Work}> {
  render() {
    const { work } = this.props;
    return <FiveProvider initialWork={work}>
      <FiveCanvas width={512} height={512}/>
    </FiveProvider>;
  }
})

ReactDOM.render(<App/>, document.querySelector("#app"));

export {};
```

</TabItem>
</Tabs>

å›åˆ°ä½ çš„æµè§ˆå™¨ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯å·²ç»æœ‰ä¸€ä¸ªä¸‰ç»´ç©ºé—´å·²ç»å±•ç¤ºåœ¨å·¦ä¸Šçš„ä½ç½®ã€‚
ä½ å¯ä»¥ç”¨é¼ æ ‡æˆ–è€…è§¦æ‘¸æ‰‹åŠ¿æ“ä½œç”»é¢ï¼ŒåŸºæœ¬çš„æµè§ˆåŠŸèƒ½éƒ½å·²ç»é™„å¸¦äº†ã€‚

### è®©ç”»é¢é“ºæ»¡æ•´ä¸ªå±å¹•

è™½ç„¶å¯èƒ½å¹¶ä¸èƒ½å®Œå…¨ç†è§£ä¸Šè¿°ä»£ç çš„å·¥ä½œåŸç†ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ° `FiveCanvas` ä¸Šæœ‰ `width` å’Œ `height` å±æ€§ï¼Œéå¸¸åƒç”»é¢å°ºå¯¸çš„æ ·å­ã€‚å¹¶ä¸”åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼Œç”»é¢åœ¨å·¦ä¸Šè§’çš„ä½ç½®ï¼Œä¹Ÿå°è¯äº†è¿™ä¸ªçŒœæƒ³ã€‚å¯¹æ¯æ¬¡ï¼Œä»–ä»¬å°±æ˜¯ç”¨äºè®¾ç½®ç”»é¢å°ºå¯¸çš„ã€‚

é‚£æˆ‘ä»¬å°è¯•ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„ React Hooks æ–¹å¼ï¼Œå°†å®ƒé“ºæ»¡å±å¹•ã€‚

<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```jsx title="src/0.getting-started/index.jsx"
import React, { Component } from "react";
import ReactDOM from "react-dom";
import { parseWork } from "@realsee/five";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { compose } from "@wordpress/compose";

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

/**
 * React HOC è·å– work
 * @param url work.json çš„åœ°å€
 */
function withFetchWork(url) {
  return function(Compnent) {
    return class extends Component {
      state = { work: null };
      componentDidMount() {
        fetch(url).then(res => res.json()).then(json => {
          this.setState({ work: parseWork(json) });
        });
      }
      render() {
        if (this.state.work === null) return null;
        return <Compnent work={this.state.work} {...this.props}/>;
      }
    }
  }
}

/**
 * React HOC: è·å–å½“å‰çª—å£çš„å°ºå¯¸
 */
function withWindowDimensions() {
  return function(Compnent) {
    return class extends Component {
      state = this.getWindowDimensions();
      resizeListener = () => {
        this.setState(this.getWindowDimensions());
      };
      getWindowDimensions() {
        return { width: window.innerWidth, height: window.innerHeight };
      }
      componentDidMount() {
        window.addEventListener("resize", this.resizeListener, false);
      }
      componentWillUnmount() {
        window.removeEventListener("resize", this.resizeListener, false);
      }
      render() {
        const dimensions = { width: this.state.width, height: this.state.height };
        return <Compnent windowDimensions={dimensions} {...this.props}/>;
      }
    }
  }
}

const FiveProvider = createFiveProvider();
const App = compose(
  withFetchWork(workURL),
  withWindowDimensions()
)(
  class extends Component {
  render() {
    const { work, windowDimensions } = this.props;
    return <FiveProvider initialWork={work}>
      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>
    </FiveProvider>;
  }
})

ReactDOM.render(<App/>, document.querySelector("#app"));

export {};
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```tsx title="src/0.getting-started/index.tsx"
import React, { Component, ComponentClass } from "react";
import ReactDOM from "react-dom";
import { Work, parseWork } from "@realsee/five";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { compose } from "@wordpress/compose";

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

/**
 * React HOC è·å– work
 * @param url work.json çš„åœ°å€
 */
function withFetchWork<P extends Record<string, any>>(url: string) {
  return function(Compnent: ComponentClass<P & { work: Work }>): ComponentClass<P> {
    return class extends Component<P, {work: Work | null}> {
      state = { work: null };
      componentDidMount() {
        fetch(url).then(res => res.json()).then(json => {
          this.setState({ work: parseWork(json) });
        });
      }
      render() {
        if (this.state.work === null) return null;
        return <Compnent work={this.state.work} {...this.props}/>;
      }
    }
  }
}

/**
 * React HOC: è·å–å½“å‰çª—å£çš„å°ºå¯¸
 */
function withWindowDimensions<P extends Record<string, any>>() {
  return function(Compnent: ComponentClass<P & { windowDimensions: { width: number, height: number} }>): ComponentClass<P> {
    return class extends Component<P, {width: number, height: number}> {
      state = this.getWindowDimensions();
      resizeListener = () => {
        this.setState(this.getWindowDimensions());
      };
      getWindowDimensions() {
        return { width: window.innerWidth, height: window.innerHeight };
      }
      componentDidMount() {
        window.addEventListener("resize", this.resizeListener, false);
      }
      componentWillUnmount() {
        window.removeEventListener("resize", this.resizeListener, false);
      }
      render() {
        const dimensions = { width: this.state.width, height: this.state.height };
        return <Compnent windowDimensions={dimensions} {...this.props}/>;
      }
    }
  }
}

const FiveProvider = createFiveProvider();
const App = compose(
  withFetchWork(workURL),
  withWindowDimensions()
)(class extends Component<{work: Work, windowDimensions: { width: number, height: number }}> {
  render() {
    const { work, windowDimensions } = this.props;
    return <FiveProvider initialWork={work}>
      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>
    </FiveProvider>;
  }
})

ReactDOM.render(<App/>, document.querySelector("#app"));

export {};
```

</TabItem>
</Tabs>


å›åˆ°ä½ çš„æµè§ˆå™¨ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯ç¬¦åˆé¢„æœŸã€‚

ä½ çœŸæ£’ ğŸ¥³ ï¼


## ä»£ç æ•´ç†æ‹†åˆ†

ç›®å‰æˆ‘ä»¬æ‰€æœ‰çš„ä»£ç éƒ½å†™åœ¨çš„äº†ä¸€ä¸ª **js** / **ts** æ–‡ä»¶é‡Œã€‚è™½ç„¶ä¸€çœ¼å°±èƒ½çœ‹åˆ°æ‰€æœ‰çš„é€»è¾‘ï¼Œä½†æ˜¯æ¯”è¾ƒæ‚ä¹±ã€‚æˆ‘ä»¬å°†å†…å®¹æ‹†åˆ†åˆ°å¤šä¸ªæ–‡ä»¶å°†ä¼šæ”¹å–„è¿™ä¸€ç‚¹ã€‚

- å°† `App` æ‹†åˆ†åˆ°å•ç‹¬æ–‡ä»¶ã€‚
- å°† `withFetchWork` æ–¹æ³•æ‹†åˆ†åˆ°å•ç‹¬æ–‡ä»¶ã€‚
- å°† `withWindowDimensions` æ–¹æ³•æ‹†åˆ†åˆ°å•ç‹¬æ–‡ä»¶ã€‚


<Tabs>
<TabItem value="JavaScript" label="JavaScript">

**src/0.getting-started/withFetchWork.jsx**
```jsx
import React, { Component } from "react";
import { parseWork } from "@realsee/five";

/**
 * React HOC è·å– work
 * @param url work.json çš„åœ°å€
 */
function withFetchWork(url) {
  return function(Compnent) {
    return class extends Component {
      state = { work: null };
      componentDidMount() {
        fetch(url).then(res => res.json()).then(json => {
          this.setState({ work: parseWork(json) });
        });
      }
      render() {
        if (this.state.work === null) return null;
        return <Compnent work={this.state.work} {...this.props}/>;
      }
    }
  }
}

export { withFetchWork };
```

**src/0.getting-started/withWindowDimensions.jsx**
```jsx
import React, { Component } from "react";

/**
 * React HOC: è·å–å½“å‰çª—å£çš„å°ºå¯¸
 */
function withWindowDimensions() {
  return function(Compnent) {
    return class extends Component {
      state = this.getWindowDimensions();
      resizeListener = () => {
        this.setState(this.getWindowDimensions());
      };
      getWindowDimensions() {
        return { width: window.innerWidth, height: window.innerHeight };
      }
      componentDidMount() {
        window.addEventListener("resize", this.resizeListener, false);
      }
      componentWillUnmount() {
        window.removeEventListener("resize", this.resizeListener, false);
      }
      render() {
        const dimensions = { width: this.state.width, height: this.state.height };
        return <Compnent windowDimensions={dimensions} {...this.props}/>;
      }
    }
  }
}

export { withWindowDimensions };
```

**src/0.getting-started/App.jsx**
```jsx
import React, { Component } from "react";
import { compose } from "@wordpress/compose";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { withFetchWork } from "./withFetchWork";
import { withWindowDimensions } from "./withWindowDimensions";

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

const FiveProvider = createFiveProvider();

const App = compose(
  withFetchWork(workURL),
  withWindowDimensions()
)(class extends Component {
  render() {
    const { work, windowDimensions } = this.props;
    return <FiveProvider initialWork={work}>
      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>
    </FiveProvider>;
  }
});

export { App };
```

**src/0.getting-started/index.jsx**
```jsx
import React from "react";
import ReactDOM from "react-dom";
import { App } from "./App";

ReactDOM.render(<App/>, document.querySelector("#app"));

export {};
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

**src/0.getting-started/withFetchWork.tsx**
```tsx
import React, { Component, ComponentClass } from "react";
import { Work, parseWork } from "@realsee/five";

/**
 * React HOC è·å– work
 * @param url work.json çš„åœ°å€
 */
function withFetchWork<P extends Record<string, any>>(url: string) {
  return function(Compnent: ComponentClass<P & { work: Work }>): ComponentClass<P> {
    return class extends Component<P, {work: Work | null}> {
      state = { work: null };
      componentDidMount() {
        fetch(url).then(res => res.json()).then(json => {
          this.setState({ work: parseWork(json) });
        });
      }
      render() {
        if (this.state.work === null) return null;
        return <Compnent work={this.state.work} {...this.props}/>;
      }
    }
  }
}

export { withFetchWork };
```

**src/0.getting-started/withWindowDimensions.tsx**
```tsx
import React, { Component, ComponentClass } from "react";

/**
 * React HOC: è·å–å½“å‰çª—å£çš„å°ºå¯¸
 */
function withWindowDimensions<P extends Record<string, any>>() {
  return function(Compnent: ComponentClass<P & { windowDimensions: { width: number, height: number} }>): ComponentClass<P> {
    return class extends Component<P, {width: number, height: number}> {
      state = this.getWindowDimensions();
      resizeListener = () => {
        this.setState(this.getWindowDimensions());
      };
      getWindowDimensions() {
        return { width: window.innerWidth, height: window.innerHeight };
      }
      componentDidMount() {
        window.addEventListener("resize", this.resizeListener, false);
      }
      componentWillUnmount() {
        window.removeEventListener("resize", this.resizeListener, false);
      }
      render() {
        const dimensions = { width: this.state.width, height: this.state.height };
        return <Compnent windowDimensions={dimensions} {...this.props}/>;
      }
    }
  }
}

export { withWindowDimensions };
```

**src/0.getting-started/App.tsx**
```tsx
import React, { Component } from "react";
import { Work } from "@realsee/five";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { compose } from "@wordpress/compose";
import { withFetchWork } from "./withFetchWork";
import { withWindowDimensions } from "./withWindowDimensions";

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

const FiveProvider = createFiveProvider();

const App = compose(
  withFetchWork(workURL),
  withWindowDimensions()
)(class extends Component<{work: Work, windowDimensions: { width: number, height: number }}> {
  render() {
    const { work, windowDimensions } = this.props;
    return <FiveProvider initialWork={work}>
      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>
    </FiveProvider>;
  }
});


export { App };
```

**src/0.getting-started/index.tsx**
```tsx
import React from "react";
import ReactDOM from "react-dom";
import { App } from "./App";

ReactDOM.render(<App/>, document.querySelector("#app"));

export {};
```

</TabItem>
</Tabs>


æ˜¯ä¸æ˜¯èˆ’æœå¤šäº†ã€‚æ¯ä¸ªæ–‡ä»¶éƒ½éå¸¸ç®€æ´ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“çœ‹æ˜ç™½ä»–ä»¬åˆ†åˆ«çš„ä½œç”¨ã€‚

## ä¸‹ä¸€ç« èŠ‚ä½ ä¼šå­¦åˆ°

:::tip ä¸‹ä¸€ç« èŠ‚ä½ ä¼šå­¦åˆ°

- äº†è§£ä»€ä¹ˆæ˜¯ Workã€‚
- äº†è§£åˆšæ‰çš„ä»£ç ï¼Œæ¯”å¦‚ `FiveProvider` / `FiveCanvas` ç»„ä»¶æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

:::
