---
title: ä¸‰ç»´ç©ºé—´ä¸­çš„ç‚¹
---

> **ä¸Šä¸€ç« å›é¡¾: çŠ¶æ€å½•åˆ¶** <br/>
> - ä½ äº†è§£äº†å¦‚ä½•é€šè¿‡ **State** å®Œæˆæ“ä½œçš„å½•åˆ¶å’Œè¿˜åŸã€‚<br/>
> - ç†Ÿæ‚‰åœ°ä½¿ç”¨ **State** ç›¸å…³çš„æ–¹æ³•å’Œäº‹ä»¶ã€‚

:::tip æœ¬ç« ä½ å¯ä»¥å­¦ä¹ åˆ°

- äº†è§£ Five SDK çš„äº‹ä»¶ç³»ç»Ÿã€‚
- è·å–åˆ°ç‚¹çš„ä¸‰ç»´ä½ç½®ã€‚

:::

## å‡†å¤‡å·¥ä½œ
æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç›®å½•ï¼ˆ`src/4.points-in-3d`ï¼‰ä»¥åŠå¯¹åº”çš„ **html** æ–‡ä»¶ ä»¥åŠ **jsx** æˆ– **tsx** æ–‡ä»¶ã€‚
æºå¸¦ç€ä¸Šä¸€ç« çš„ **State** ä»£ç ï¼Œå¤ªè¿‡äºç¹çï¼Œé‚£æˆ‘ä»¬ä» **å±•ç¤ºä¸‰ç»´ç©ºé—´** ç« çš„å†…å®¹çš„åŸºç¡€å¼€å‘ã€‚

```html title="src/4.points-in-3d/index.html"
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¸‰ç»´ä¸­çš„ç‚¹ | Points in 3d</title>
  <style>
    * { margin: 0; padding: 0; }
    html, body #app { width: 100%; height: 100%; overflow: hidden; }
  </style>
</head>
<body>
  <div id="app"></div>
  <script type="module" src="./index"></script>
</body>
</html>
```

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```jsx title="src/4.points-in-3d/withFetchWork.jsx"
import React, { Component } from "react";
import { parseWork } from "@realsee/five";

/**
 * React HOC è·å– work
 * @param url work.json çš„åœ°å€
 */
function withFetchWork(url) {
  return function(Compnent) {
    return class extends Component {
      state = { work: null };
      componentDidMount() {
        fetch(url).then(res => res.json()).then(json => {
          this.setState({ work: parseWork(json) });
        });
      }
      render() {
        if (this.state.work === null) return null;
        return <Compnent work={this.state.work} {...this.props}/>;
      }
    }
  }
}

export { withFetchWork };
```

```jsx title="src/4.points-in-3d/withWindowDimensions.jsx"
import React, { Component } from "react";

/**
 * React HOC: è·å–å½“å‰çª—å£çš„å°ºå¯¸
 */
function withWindowDimensions() {
  return function(Compnent) {
    return class extends Component {
      state = this.getWindowDimensions();
      resizeListener = () => {
        this.setState(this.getWindowDimensions());
      };
      getWindowDimensions() {
        return { width: window.innerWidth, height: window.innerHeight };
      }
      componentDidMount() {
        window.addEventListener("resize", this.resizeListener, false);
      }
      componentWillUnmount() {
        window.removeEventListener("resize", this.resizeListener, false);
      }
      render() {
        const dimensions = { width: this.state.width, height: this.state.height };
        return <Compnent windowDimensions={dimensions} {...this.props}/>;
      }
    }
  }
}

export { withWindowDimensions };
```

```jsx title="src/4.points-in-3d/ModeController.jsx"
import React, { Component } from "react";
import { Five } from "@realsee/five";
import { withFive, createFiveFeature } from "@realsee/five/react";
import { compose } from "@wordpress/compose";
import BottomNavigation from "@mui/material/BottomNavigation";
import BottomNavigationAction from "@mui/material/BottomNavigationAction";
import Paper from "@mui/material/Paper";
import DirectionsWalkIcon from "@mui/icons-material/DirectionsWalk";
import ViewInArIcon from "@mui/icons-material/ViewInAr";

const FEATURES = createFiveFeature("currentState", "setState");

/**
 * React Component: æ¨¡æ€æ§åˆ¶
 */
const ModeController = compose(
  withFive(FEATURES)
)(class extends Component {
  render() {
    return <Paper sx={{ position: "fixed", bottom: 0, left: 0, right: 0 }}>
      <BottomNavigation
        showLabels
        value={this.props.$five.currentState.mode}
        onChange={(_, newValue) => {
          this.props.$five.setState({ mode: newValue });
        }}
      >
        <BottomNavigationAction label="å…¨æ™¯æ¼«æ¸¸" icon={<DirectionsWalkIcon/>} value={Five.Mode.Panorama}/>
        <BottomNavigationAction label="ç©ºé—´æ€»è§ˆ" icon={<ViewInArIcon/>} value={Five.Mode.Floorplan}/>
      </BottomNavigation>
    </Paper>;
  }
})

export { ModeController };
```

```jsx title="src/4.points-in-3d/App.jsx"
import React, { Component } from "react";
import { compose } from "@wordpress/compose";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { withFetchWork } from "./withFetchWork";
import { withWindowDimensions } from "./withWindowDimensions";
import { ModeController } from "./ModeController";

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

const FiveProvider = createFiveProvider();

const App = compose(
  withFetchWork(workURL),
  withWindowDimensions()
)(class extends Component {
  render() {
    const { work, windowDimensions } = this.props;
    return <FiveProvider initialWork={work}>
      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>
      <ModeController/>;
    </FiveProvider>;
  }
});

export { App };
```

```jsx title="src/4.points-in-3d/index.jsx"
import React from "react";
import ReactDOM from "react-dom";
import { App } from "./App";

ReactDOM.render(<App/>, document.querySelector("#app"));

export {};
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```tsx title="src/4.points-in-3d/withFetchWork.tsx"
import React, { Component, ComponentClass } from "react";
import { Work, parseWork } from "@realsee/five";

/**
 * React HOC è·å– work
 * @param url work.json çš„åœ°å€
 */
function withFetchWork<P extends Record<string, any>>(url: string) {
  return function(Compnent: ComponentClass<P & { work: Work }>): ComponentClass<P> {
    return class extends Component<P, {work: Work | null}> {
      state = { work: null };
      componentDidMount() {
        fetch(url).then(res => res.json()).then(json => {
          this.setState({ work: parseWork(json) });
        });
      }
      render() {
        if (this.state.work === null) return null;
        return <Compnent work={this.state.work} {...this.props}/>;
      }
    }
  }
}

export { withFetchWork };
```

```tsx title="src/4.points-in-3d/withWindowDimensions.tsx"
import React, { Component, ComponentClass } from "react";

/**
 * React HOC: è·å–å½“å‰çª—å£çš„å°ºå¯¸
 */
function withWindowDimensions<P extends Record<string, any>>() {
  return function(Compnent: ComponentClass<P & { windowDimensions: { width: number, height: number} }>): ComponentClass<P> {
    return class extends Component<P, {width: number, height: number}> {
      state = this.getWindowDimensions();
      resizeListener = () => {
        this.setState(this.getWindowDimensions());
      };
      getWindowDimensions() {
        return { width: window.innerWidth, height: window.innerHeight };
      }
      componentDidMount() {
        window.addEventListener("resize", this.resizeListener, false);
      }
      componentWillUnmount() {
        window.removeEventListener("resize", this.resizeListener, false);
      }
      render() {
        const dimensions = { width: this.state.width, height: this.state.height };
        return <Compnent windowDimensions={dimensions} {...this.props}/>;
      }
    }
  }
}

export { withWindowDimensions };
```

```tsx title="src/4.points-in-3d/ModeController.tsx"
import React, { Component } from "react";
import { Five, Mode } from "@realsee/five";
import { withFive, createFiveFeature, PropTypeOfFiveFeatures } from "@realsee/five/react";
import { compose } from "@wordpress/compose";
import BottomNavigation from "@mui/material/BottomNavigation";
import BottomNavigationAction from "@mui/material/BottomNavigationAction";
import Paper from "@mui/material/Paper";
import DirectionsWalkIcon from "@mui/icons-material/DirectionsWalk";
import ViewInArIcon from "@mui/icons-material/ViewInAr";

const FEATURES = createFiveFeature("currentState", "setState");
type Props = PropTypeOfFiveFeatures<typeof FEATURES>;

/**
 * React Component: æ¨¡æ€æ§åˆ¶
 */
const ModeController = compose(
  withFive(FEATURES)
)(class extends Component<Props> {
  render() {
    return <Paper sx={{ position: "fixed", bottom: 0, left: 0, right: 0 }}>
      <BottomNavigation
        showLabels
        value={this.props.$five.currentState.mode}
        onChange={(_, newValue: Mode) => {
          this.props.$five.setState({ mode: newValue });
        }}
      >
        <BottomNavigationAction label="å…¨æ™¯æ¼«æ¸¸" icon={<DirectionsWalkIcon/>} value={Five.Mode.Panorama}/>
        <BottomNavigationAction label="ç©ºé—´æ€»è§ˆ" icon={<ViewInArIcon/>} value={Five.Mode.Floorplan}/>
      </BottomNavigation>
    </Paper>;
  }
})

export { ModeController };
```

```tsx title="src/4.points-in-3d/App.tsx"
import React, { Component } from "react";
import { Work } from "@realsee/five";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { compose } from "@wordpress/compose";
import { withFetchWork } from "./withFetchWork";
import { withWindowDimensions } from "./withWindowDimensions";
import { ModeController } from "./ModeController";

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

const FiveProvider = createFiveProvider();

const App = compose(
  withFetchWork(workURL),
  withWindowDimensions()
)(class extends Component<{work: Work, windowDimensions: { width: number, height: number }}> {
  render() {
    const { work, windowDimensions } = this.props;
    return <FiveProvider initialWork={work}>
      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>
      <ModeController/>
    </FiveProvider>;
  }
});


export { App };
```

```tsx title="src/4.points-in-3d/index.tsx"
import React from "react";
import ReactDOM from "react-dom";
import { App } from "./App";

ReactDOM.render(<App/>, document.querySelector("#app"));

export {};
```

</TabItem>
</Tabs>


å¯åŠ¨æœåŠ¡ `npm run dev`ã€‚ å¹¶è·³è½¬åˆ°å½“å‰é¡µé¢ "http://localhost:3000/src/4.points-in-3d/index.html"ã€‚

:::info
è¯·æŸ¥çœ‹ä½ çš„æ§åˆ¶å°ï¼Œç«¯å£å·ä¼šå› ä¸ºä½ çš„é…ç½®ä»¥åŠå½“å‰ç«¯å£å ç”¨æƒ…å†µå˜æ›´ï¼Œè¯·å·²æ§åˆ¶å°è¾“å‡ºçš„ä¸ºå‡†ã€‚
å¦‚æœä½ ä½¿ç”¨å…¶ä»–å¼€å‘æ„å»ºå·¥å…·ï¼Œè¯·æŒ‰ç…§è‡ªå·±çš„å¼€å‘æ„å»ºå·¥å…·çš„è¦æ±‚å¯åŠ¨æœåŠ¡ã€‚
:::

## äº‹ä»¶ç³»ç»Ÿ

åœ¨å±å¹•ä¸Šç‚¹å‡»æ—¶ï¼Œ**five SDK** çš„é»˜è®¤è¡Œä¸ºæ˜¯é€‰æ‹©ç‚¹å‡»ä½ç½®é™„è¿‘æœ€åˆé€‚çš„ **è§‚å¯Ÿç‚¹(observer)** ç§»åŠ¨è¿‡å»ã€‚å¤§éƒ¨åˆ†ç”¨æˆ·çš„åŠ¨ä½œéƒ½æ˜¯å¦‚æ­¤ï¼Œå°±å¥½æ¯”æµè§ˆå™¨å¯¹äº **A æ ‡ç­¾** çš„å¤„ç†é€»è¾‘å¤§å¤šéƒ½æ˜¯é“¾æ¥è·³è½¬ã€‚ä¸Šè¿°å°±æ˜¯ **five SDK** çš„å†…å»º **tapGesture**äº‹ä»¶ã€‚

### å†…å»ºäº‹ä»¶

**five SDK** å†…å»ºçš„äº‹ä»¶æœ‰å¦‚ä¸‹ï¼š

- **tapGesture**: é¼ æ ‡å·¦é”®ç‚¹å‡»æˆ–è€…æ‰‹æŒ‡ç‚¹å‡»ã€‚é»˜è®¤è¡Œä¸ºæ˜¯ç‚¹ä½ç§»åŠ¨ã€‚
- **panGesture**: é¼ æ ‡æŒ‰ä½ä¸€æ ‹æˆ–è€…æ‰‹æŒ‡åœ¨å±å¹•ä¸Šæ‹–æ‹½ç§»åŠ¨ã€‚ç›¸æœºæ—‹è½¬ï¼ˆTopviewä¸‹æ˜¯ç›¸æœºå¹³ç§»ï¼‰ã€‚
- **pinchGesture**: æ‰‹æŒ‡åŒæŒ‡åšæçš„æ‰‹åŠ¿ã€‚é»˜è®¤è¡Œä¸ºæ˜¯ä¿®æ”¹ç›¸æœºå¯è§†è§’åº¦ã€‚
- **mouseWheel**: é¼ æ ‡æ»šè½®ã€‚é»˜è®¤è¡Œä¸ºæ˜¯ä¿®æ”¹ç›¸æœºå¯è§†è§’åº¦ã€‚
- **gesture**: ä¸Šè¿°çš„ä»»æ„äº‹ä»¶ã€‚

### é˜»æ­¢é»˜è®¤è¡Œä¸º

æ‰€æœ‰äº‹ä»¶å’Œ æµè§ˆå™¨å¯¹äº **A æ ‡ç­¾** çš„å¤„ç†é€»è¾‘ ä¸€æ ·ï¼Œéƒ½å¯ä»¥é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼Œä½ åªéœ€è¦ç›‘å¬ `wants` å¼€å¤´çš„äº‹ä»¶ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­ `return false` å³å¯ã€‚æ¯”å¦‚æƒ³é˜»æ­¢ **tapGesture** çš„é»˜è®¤ç‚¹ä½ç§»åŠ¨è¡Œä¸ºã€‚å¯ä»¥åšå¦‚ä¸‹æ“ä½œã€‚

```js
this.props.$five.on("wantsTapGesture", () => {
  // highlight-start
  // é˜»æ­¢ tapGesture è§¦å‘
  return false;
  // highlight-end
});
```

å…·ä½“æ¯ä¸ªäº‹ä»¶çš„ API å¯ä»¥æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£
- [tapGesture](https://unpkg.com/@realsee/five/docs/interfaces/five.EventCallback.html#tapGesture)
- [panGesture](https://unpkg.com/@realsee/five/docs/interfaces/five.EventCallback.html#panGesture)
- [pinchGesture](https://unpkg.com/@realsee/five/docs/interfaces/five.EventCallback.html#pinchGesture)
- [mouseWheel](https://unpkg.com/@realsee/five/docs/interfaces/five.EventCallback.html#mouseWheel)
- [gesture](https://unpkg.com/@realsee/five/docs/interfaces/five.EventCallback.html#gesture)

## ä» tapGesture è·å–åæ ‡

> æˆ‘ä»¬åˆ¶ä½œä¸€ä¸ªç®€å•åŠŸèƒ½ï¼Œç”¨äºæ ‡è®°åœ¨ç”»å¸ƒä¸Šç‚¹å‡»çš„ä¸‰ç»´ä½ç½®ã€‚
> ä½†æ˜¯ä¸ºäº†å’Œ **ç‚¹ä½ç§»åŠ¨** åŠŸèƒ½ä¸å†²çªï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª `Switch` æŒ‰é’®æ¥æ§åˆ¶æ ‡è®°çŠ¶æ€æ˜¯å¦å¼€å¯ã€‚

### å¤´éƒ¨æ·»åŠ ä¾èµ–

æœ¬ç« éœ€è¦ä»‹ç»ä¸€ä¸‹ [three.js](http://threejs.org) äº†ã€‚**three.js** æ˜¯ä¸€ä¸ªä¸‰ç»´å›¾å½¢åº“ï¼Œ**Five SDK** ä½¿ç”¨ **three.js** çš„æ•°å­¦åº“å’Œæ¸²æŸ“å™¨ã€‚æœ¬ç« æ¶‰åŠ **three.js** æœ‰ä¸¤ä¸ªå†…å®¹ï¼Œåœ¨è¿™é‡Œåšä¸€äº›è¯´æ˜ï¼Œä½ ä¸å¿…å®Œå…¨äº†è§£ **three.js**, æˆ‘åšä¸€äº›è¯´æ˜ä½ å°±å¯ä»¥ç†è§£ã€‚

- [`THREE.Vector3`](https://threejs.org/docs/index.html#api/zh/math/Vector3): ä½ å¯ä»¥å°±è®¤ä¸ºæ˜¯ä¸€ä¸ª `{ x: number, y: number, z: number }` çš„ç»“æ„ä½“ï¼Œå¹¶ä¸”å¤šåŠ äº†ä¸€äº›æ•°å­¦æ–¹æ³•ï¼ˆæœ¬æ¬¡ä¸ä¼šç”¨åˆ°æ•°å­¦æ–¹æ³•ï¼Œåªæ˜¯è®°å½•xyzï¼‰
- [`THREE.Raycaster`](https://threejs.org/docs/index.html#api/zh/core/Raycaster): å…‰çº¿æŠ•å°„ç±»ã€‚ä½ å¯ä»¥ç®€å•çš„ç†è§£ä¸ºå±å¹•ä¸Šçš„ä¸€ä¸ªç‚¹å¯¹åº”åˆ°ä¸‰ç»´ç©ºé—´æ˜¯ä¸€æ¡å°„çº¿ã€‚

![REYCASTER](../../../../assets/raycaster.png);

å°„çº¿æœ‰å¾ˆå¤šä½œç”¨ï¼Œæ¯”å¦‚ï¼šé€šè¿‡å°„çº¿å’Œæ¨¡å‹ä¹‹å‰çš„ç›¸äº¤æ€§æ£€æµ‹ï¼Œå°±å¯ä»¥åˆ¤æ–­æ˜¯å¦å¯¹è±¡è¢«é€‰ä¸­ã€‚

### ç¼–å†™ **MarkController** ç»„ä»¶

1. æ·»åŠ ä¸€ä¸ª **MarkController** æ–‡ä»¶ï¼Œç”¨äºç¼–å†™ç»„ä»¶ã€‚
2. æˆ‘ä»¬é€šè¿‡ **active** React state çŠ¶æ€æ¥æ§åˆ¶å½“å‰åº”ç”¨æ˜¯å¦åœ¨æ ‡è®°çš„æ¨¡å¼ä¸‹ã€‚
3. é€šè¿‡ `tapGesture` ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `raycaster`ï¼Œé€šè¿‡ `modelIntersectRaycaster` å¯ä»¥è·å–åˆ°ç„¦ç‚¹ä¿¡æ¯`intersect`ï¼Œ`intersect.point` å°±æ˜¯äº¤ç‚¹çš„åæ ‡ã€‚
4. é€šè¿‡ `marks` React state æ¥å­˜å‚¨æ‰€æœ‰äº¤ç‚¹ï¼Œå¹¶ä¸”å®ç°æ”¶é›†å’Œåˆ é™¤ã€‚


<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```jsx title="src/4.points-in-3d/MarkController.jsx"
import React, { Component } from "react";
import { compose } from "@wordpress/compose";
import { withFive, createFiveFeature } from "@realsee/five/react";
import Button from "@mui/material/Button";
import Switch from "@mui/material/Switch";
import Chip from "@mui/material/Chip";
import Stack from "@mui/material/Stack";
import Paper from "@mui/material/Paper";

const FEATURES = createFiveFeature("intersectRaycaster", "on", "off");

const MarkController = compose(
  withFive(FEATURES)
)(class extends Component {

  state = { active: false, marks: [] };

  onTapGesture = (raycaster) => {
    if (this.state.active) {
      const [intersect] = this.props.$five.intersectRaycaster(raycaster);
      if (intersect) this.setState({ marks: this.state.marks.concat(intersect.point) });
      return false;
    }
  };

  componentDidMount() {
    this.props.$five.on("wantsTapGesture", this.onTapGesture);
  }
  componentWillUnmount() {
    this.props.$five.off("wantsTapGesture", this.onTapGesture);
  }
  render() {
    return <Paper sx={{ position: "fixed", top: 10, left: 10, padding: 1 }}>
      <Stack>
        <Stack direction="row">
          <Switch
            checked={this.state.active}
            onChange={(event, checked) => this.setState({ active: checked })}
          /> <Button disabled>å¼€å¯ç‚¹å‡»è®°å½•åæ ‡</Button>
        </Stack>
        <Stack spacing={1}>
        {this.state.marks.map((point, index) => {
          const { x, y, z } = point;
          return <Chip
            key={index}
            label={`x=${x.toFixed(2)} y=${y.toFixed(2)} z=${z.toFixed(2)}`}
            onDelete={() => this.setState({marks: this.state.marks.filter((_, index_) => index_ !== index)})}
          />
        })}
        </Stack>
      </Stack>
    </Paper>
  }
});

export { MarkController };
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```tsx title="src/4.points-in-3d/MarkController.tsx"
import * as THREE from "three";
import React, { Component } from "react";
import { compose } from "@wordpress/compose";
import { EventCallback } from "@realsee/five";
import { withFive, createFiveFeature, PropTypeOfFiveFeatures } from "@realsee/five/react";
import Button from "@mui/material/Button";
import Switch from "@mui/material/Switch";
import Chip from "@mui/material/Chip";
import Stack from "@mui/material/Stack";
import Paper from "@mui/material/Paper";

const FEATURES = createFiveFeature("intersectRaycaster", "on", "off");
type Props = PropTypeOfFiveFeatures<typeof FEATURES>;
type State = {
  active: boolean,
  marks: THREE.Vector3[],
};

const MarkController = compose(
  withFive(FEATURES)
)(class extends Component<Props, State> {

  state: State = { active: false, marks: [] };

  onTapGesture: EventCallback["wantsTapGesture"] = (raycaster) => {
    if (this.state.active) {
      const [intersect] = this.props.$five.intersectRaycaster(raycaster);
      if (intersect) this.setState({ marks: this.state.marks.concat(intersect.point) });
      return false;
    }
  };

  componentDidMount() {
    this.props.$five.on("wantsTapGesture", this.onTapGesture);
  }
  componentWillUnmount() {
    this.props.$five.off("wantsTapGesture", this.onTapGesture);
  }
  render() {
    return <Paper sx={{ position: "fixed", top: 10, left: 10, padding: 1 }}>
      <Stack>
        <Stack direction="row">
          <Switch
            checked={this.state.active}
            onChange={(event, checked) => this.setState({ active: checked })}
          /> <Button disabled>å¼€å¯ç‚¹å‡»è®°å½•åæ ‡</Button>
        </Stack>
        <Stack spacing={1}>
        {this.state.marks.map((point, index) => {
          const { x, y, z } = point;
          return <Chip
            key={index}
            label={`x=${x.toFixed(2)} y=${y.toFixed(2)} z=${z.toFixed(2)}`}
            onDelete={() => this.setState({marks: this.state.marks.filter((_, index_) => index_ !== index)})}
          />
        })}
        </Stack>
      </Stack>
    </Paper>
  }
});

export { MarkController };
```

</TabItem>
</Tabs>



### ä½¿ç”¨æ ‡è®°ç»„ä»¶

æ’å…¥åˆ° **App** æ–‡ä»¶çš„ **FiveProvider** ä¸­


<Tabs>
<TabItem value="JavaScript" label="JavaScript">

```jsx title="src/4.points-in-3d/App.jsx"
import React, { Component } from "react";
import { compose } from "@wordpress/compose";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { withFetchWork } from "./withFetchWork";
import { withWindowDimensions } from "./withWindowDimensions";
import { ModeController } from "./ModeController";
// highlight-start
import { MarkController } from "./MarkController";
// highlight-end

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

const FiveProvider = createFiveProvider();

const App = compose(
  withFetchWork(workURL),
  withWindowDimensions()
)(class extends Component {
  render() {
    const { work, windowDimensions } = this.props;
    return <FiveProvider initialWork={work}>
      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>
      <ModeController/>;
      // highlight-start
      <MarkController/>;
      // highlight-end
    </FiveProvider>;
  }
});

export { App };
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

```tsx title="src/4.points-in-3d/App.tsx"
import React, { Component } from "react";
import { Work } from "@realsee/five";
import { createFiveProvider, FiveCanvas } from "@realsee/five/react";
import { compose } from "@wordpress/compose";
import { withFetchWork } from "./withFetchWork";
import { withWindowDimensions } from "./withWindowDimensions";
import { ModeController } from "./ModeController";
// highlight-start
import { MarkController } from "./MarkController";
// highlight-end

/** work.json çš„æ•°æ® URL */
const workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";

const FiveProvider = createFiveProvider();

const App = compose(
  withFetchWork(workURL),
  withWindowDimensions()
)(class extends Component<{work: Work, windowDimensions: { width: number, height: number }}> {
  render() {
    const { work, windowDimensions } = this.props;
    return <FiveProvider initialWork={work}>
      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>
      <ModeController/>
      // highlight-start
      <MarkController/>
      // highlight-end
    </FiveProvider>;
  }
});


export { App };
```

</TabItem>
</Tabs>


å›åˆ°ä½ çš„æµè§ˆå™¨æŸ¥çœ‹ï¼Œä¼šå‘ç°ä½ çš„é¡µé¢å·¦ä¸Šè§’å‡ºç°ä¸€ä¸ªé€‰æ‹©å¼€å…³ã€‚æ‰“å¼€å¼€å…³ï¼Œç‚¹å‡»ç”»å¸ƒå†…å®¹ï¼Œä¼šè¾“å‡ºç‚¹å‡»ä½ç½®çš„åæ ‡ã€‚

çœŸæ£’ï¼Œä¸€ä¸‹å­å°±ç†è§£å’Œè·å–åˆ°äº†ä¸‰ç»´åæ ‡ğŸ¥³ ã€‚

## ä¸‹ä¸€ç« èŠ‚ä½ ä¼šå­¦åˆ°

:::tip ä¸‹ä¸€ç« æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç©ºé—´æ ‡ç­¾åŠŸèƒ½ï¼Œä¸è¦é”™è¿‡å“¦ã€‚ 
:::
