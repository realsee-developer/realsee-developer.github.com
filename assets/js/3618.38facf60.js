"use strict";(self.webpackChunkrealsee_developer_github_com=self.webpackChunkrealsee_developer_github_com||[]).push([[3618],{97103:function(e,t,r){r(66992),r(41539),r(78783),r(4129),r(33948),r(69070),r(38880);var n=r(95318),a=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(92222),r(19601),r(26541),r(47941);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(67294)),i=n(r(43386)),u=r(20600);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var l=o.memo((function(e){var t,r=function(t){var r=e.floorplanData.observers[t];if(!r)return"";var n=Math.floor(r.positionInImage.x*e.width),a=Math.floor(r.positionInImage.y*e.height);return"translate(".concat(n,"px, ").concat(a,"px)")},n=function(){var e=l.getCurrentState().longitude,t=-1*Math.floor(e/Math.PI*180)+45;return"rotate(".concat(t,"deg)")},a=function(e){c.current&&(c.current.style.transform=r(e))},f=(0,i.default)((function(){s.current&&(s.current.style.transform=n())}),1e3/60),l=e.five,c=o.useRef(null),s=o.useRef(null),p={transform:r(l.getCurrentState().panoIndex)},d={transform:n()};o.useEffect((function(){var e=function(){a(l.getCurrentState().panoIndex),f()};return a(l.getCurrentState().panoIndex),f(),l.on("panoWillArrive",a),l.on("cameraUpdate",f),l.on("modelLoaded",e),function(){l.off("panoWillArrive",a),l.off("cameraUpdate",f),l.off("modelLoaded",e)}}));var v=Object.assign({},u.rotateStyle,null===(t=e.cameraImage)||void 0===t?void 0:t.style);return o.createElement("div",{ref:c,style:Object.assign({},u.positionStyle,p)},o.createElement("div",{ref:s,style:Object.assign({},v,d)}))}),(function(e,t){return Object.keys(e).every((function(r){return t[r]===e[r]}))}));t.default=l},20600:function(e,t,r){r(69070);var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.rotateStyle=t.positionStyle=void 0,r(92222);var a=n(r(97642));t.positionStyle={position:"absolute",left:"0",top:"0",width:"0",height:"0",transform:"none",pointerEvents:"none",transition:"transform 1s linear"};var o={position:"absolute",left:(0,a.default)(-15),top:(0,a.default)(-15),width:(0,a.default)(17),height:(0,a.default)(17),backgroundSize:"100%",backgroundRepeat:"no-repeat",transformOrigin:"".concat((0,a.default)(15)," ").concat((0,a.default)(15)),transform:"rotate(45deg)",backgroundImage:"url('//vrlab-static.ljcdn.com/release/web/default-sidemap-camera.5e0b9a1a.png')"};t.rotateStyle=o},75245:function(e,t,r){r(66992),r(41539),r(78783),r(4129),r(33948),r(69070),r(38880);var n=r(95318),a=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.ExtraObjects=function(e){return o.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",pointerEvents:"none"}},e.extraObjects.map((function(e){return o.createElement("div",{key:e.id,style:{width:0,height:0,position:"absolute",top:100*e.positionInImage.y+"%",left:100*e.positionInImage.x+"%"}},o.createElement("div",{style:{width:(0,i.default)(e.icon.width),height:(0,i.default)(e.icon.height),backgroundImage:"url(".concat(e.icon.url,")"),transform:"translate(-50%, -50%)"}}))})))},r(21249);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var f=o?Object.getOwnPropertyDescriptor(e,i):null;f&&(f.get||f.set)?Object.defineProperty(n,i,f):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(67294)),i=n(r(97642));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}},31456:function(e,t,r){r(66992),r(41539),r(78783),r(4129),r(33948),r(69070),r(38880);var n=r(95318),a=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.five.work||!e.five.model)return i.createElement(i.Fragment,null);var t=e.floorplanData.floorDatas[e.floorIndex],r=i.useRef(null),n=e.floorplanData.observers;return i.createElement("div",{ref:r,className:"floorplan-plugin__room-highlight",style:{position:"absolute",width:"100%",height:"100%",pointerEvents:"all"},onClick:function(t){if(r.current){var a=r.current.getBoundingClientRect(),o=new u.Vector2(t.clientX,t.clientY),i=new u.Vector2(a.left,a.top),f=o.clone().sub(i),l=new u.Vector2(f.x/r.current.clientWidth,f.y/r.current.clientHeight),c=n.filter((function(t){return t.floorIndex===e.floorIndex})).sort((function(e,t){var r=new u.Vector2(e.positionInImage.x,e.positionInImage.y),n=new u.Vector2(t.positionInImage.x,t.positionInImage.y);return r.distanceTo(l)-n.distanceTo(l)}))[0];e.five.moveToPano(c.index)}}},i.createElement("svg",{style:{width:"100%",height:"100%",overflow:"visible"}},t.rooms.map((function(t){return i.createElement(s,(0,o.default)({key:t.id},e,{data:t}))}))))};var o=n(r(67154));r(60086),r(2707),r(57327),r(21249);var i=c(r(67294)),u=r(2212),f=c(r(66141));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function s(e){var t=e.floorplanData.bounding,r=(0,f.pathD)(e.data.path,{needZ:!0,format:function(r){return(0,f.default)(r,e.pxmm,t)}}),n=i.useRef(null);return i.createElement("path",{ref:n,d:r,fill:"#000",opacity:0,onMouseOver:function(){n.current&&(n.current.style.opacity="0.1")},onMouseOut:function(){n.current&&(n.current.style.opacity="0")}})}},53856:function(e,t,r){r(66992),r(41539),r(78783),r(4129),r(33948),r(69070),r(38880);var n=r(95318),a=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r=null==e||null===(t=e.extraObjects)||void 0===t?void 0:t.filter((function(t){return t.floorIndex===e.floorIndex}));return i.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},i.createElement(f.default,e),r&&i.createElement(l.ExtraObjects,{extraObjects:r}),e.hoverEnable&&i.createElement(u.default,(0,o.default)({},e,e.floorplanData)))};var o=n(r(67154));r(57327);var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(67294)),u=n(r(31456)),f=n(r(41041)),l=r(75245);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}},66458:function(e,t,r){r(66992),r(41539),r(78783),r(4129),r(33948),r(69070),r(38880);var n=r(95318),a=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(19601),r(26541),r(47941);var o=n(r(67154)),i=n(r(63038)),u=n(r(97103)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(67294)),l=n(r(53856)),c=r(33507);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var p=f.memo((function(e){if(!e.floorplanData)return null;var t=e.five,r=t.getCurrentState().panoIndex,n=t.work.observers,a=f.useState(n[r].floorIndex),s=(0,i.default)(a,2),p=s[0],d=s[1],v={width:e.width+"px",height:e.height+"px"},h=function(e){d(n[e].floorIndex)};return f.useEffect((function(){return t.on("panoArrived",h),function(){t.off("panoArrived",h)}}),[]),f.createElement("div",{style:Object.assign({},c.contentStyle,v)},f.createElement(l.default,(0,o.default)({},e,{floorIndex:p})),f.createElement(u.default,e))}),(function(e,t){return Object.keys(e).every((function(r){return t[r]===e[r]}))}));t.default=p},33507:function(e,t,r){r(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.contentStyle=void 0;t.contentStyle={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},19084:function(e,t,r){r(66992),r(78783),r(4129),r(33948),r(69070),r(38880);var n=r(95318),a=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(87757));r(41539),r(88674),r(19601);var i=n(r(67154)),u=n(r(63038)),f=n(r(48926)),l=n(r(34575)),c=n(r(93913)),s=n(r(59713)),p=y(r(67294)),d=n(r(66458)),v=y(r(73935)),h=y(r(93133));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}var b=function(){function e(t,r){var n=this;(0,l.default)(this,e),(0,s.default)(this,"pxmm",0),(0,s.default)(this,"wrapperSelector",""),(0,s.default)(this,"wrapper",null),(0,s.default)(this,"size",{width:0,height:0}),(0,s.default)(this,"configs",{}),(0,s.default)(this,"dispose",(function(){n.wrapper&&v.unmountComponentAtNode(n.wrapper)})),(0,s.default)(this,"load",function(){var e=(0,f.default)(o.default.mark((function e(t){var r,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.wrapper||((r=document.querySelector(n.wrapperSelector))||console.warn("\u63d2\u4ef6\u5bb9\u5668\u4e0d\u5b58\u5728\uff0c\u53ef\u80fd\u5f97\u5230\u4e0e\u9884\u671f\u4e0d\u7b26\u7684\u6548\u679c\uff0c\u662f\u4e0d\u662f\u5fd8\u8bb0\u521d\u59cb\u5316\u5bb9\u5668\u4e86\uff1f"),n.wrapper=r),a=JSON.parse(JSON.stringify(t)),e.next=4,(0,h.default)(a);case 4:return i=e.sent,n.data=i,e.next=8,new Promise((function(e){var t,r,a=n.five.work.observers[n.five.getCurrentState().panoIndex].floorIndex;if(null!==(t=i.outlines[a])&&void 0!==t&&t.svgContent)return e();var o=new Image,u=null===(r=i.outlines[a])||void 0===r?void 0:r.url;if(!u)return e();o.onload=function(){return e()},o.src=u}));case 8:n.updateSize(),n.render();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.five=t,(null==r?void 0:r.configs)&&Object.assign(this.configs,r.configs),"string"==typeof(null==r?void 0:r.wrapper)?this.wrapperSelector=r.wrapper:(null==r?void 0:r.wrapper)instanceof Element&&(this.wrapper=r.wrapper),t.once("dispose",this.dispose)}return(0,c.default)(e,[{key:"appendTo",value:function(e){this.wrapper=e}},{key:"changeConfigs",value:function(e){Object.assign(this.configs,e),this.render()}},{key:"setExtraObjectsWith3DPositions",value:function(e){this.originExtraObjects=e,this.data&&(this.extraObjects=(0,h.formatExtraObjects)(e,this.five,this.data),this.render())}},{key:"updateSize",value:function(){if(this.data&&this.wrapper){var e=Math.min(this.wrapper.clientWidth,this.wrapper.clientHeight),t=this.data.bounding,r=t.max,n=t.min,a=r.x-n.x,o=r.y-n.y,i=a>o?[e,e/a*o]:[e/o*a,e],f=(0,u.default)(i,2),l=f[0],c=f[1];this.size={width:l,height:c},this.pxmm=l/a}}},{key:"render",value:function(){if(this.data&&this.pxmm&&this.wrapper){!this.extraObjects&&this.originExtraObjects&&(this.extraObjects=(0,h.formatExtraObjects)(this.originExtraObjects,this.five,this.data));var e={pxmm:this.pxmm,five:this.five,width:this.size.width,height:this.size.height,floorplanData:this.data,extraObjects:this.extraObjects,hoverEnable:this.configs.hoverEnable,cameraImage:this.configs.cameraImage};v.render(p.createElement(d.default,(0,i.default)({},e,this.configs)),this.wrapper)}}}]),e}();t.default=b},30920:function(e,t,r){r(69070);var n=r(95318);t.ZP=void 0;var a=n(r(19084)),o=function(e,t){return new a.default(e,t)};var i=o;t.ZP=i},47661:function(e,t,r){r(69070),t.D=function(e){var t=(0,n.unsafe__useFiveInstance)().plugins[e];if(!t)throw new Error('can not find plugin "'.concat(e,'"'));return t};var n=r(54101)},43386:function(e,t,r){r(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function(){t||(e.apply(void 0,arguments),t=setTimeout((function(){t=null}),r))}},r(32564)}}]);