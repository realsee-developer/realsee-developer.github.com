"use strict";(self.webpackChunkrealsee_developer_github_com=self.webpackChunkrealsee_developer_github_com||[]).push([[2565],{49613:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var o=n(59496);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),g=r,h=d["".concat(l,".").concat(g)]||d[g]||m[g]||i;return n?o.createElement(h,a(a({ref:t},c),{},{components:n})):o.createElement(h,a({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var p=2;p<i;p++)a[p]=n[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},45558:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(59496),r=n(45924);const i="tabItem_IPoj";function a(e){let{children:t,hidden:n,className:a}=e;return o.createElement("div",{role:"tabpanel",className:(0,r.Z)(i,a),hidden:n},t)}},38637:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(2962),r=n(59496),i=n(45924),a=n(26709),s=n(33548),l=n(14714),p=n(60411);const c="tabList_xr86",m="tabItem_r4_W";function d(e){var t;const{lazy:n,block:a,defaultValue:d,values:g,groupId:h,className:u}=e,w=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=g??w.map((e=>{let{props:{value:t,label:n,attributes:o}}=e;return{value:t,label:n,attributes:o}})),v=(0,s.l)(f,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const k=null===d?d:d??(null==(t=w.find((e=>e.props.default)))?void 0:t.props.value)??w[0].props.value;if(null!==k&&!f.some((e=>e.value===k)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${k}" but none of its children has the corresponding value. Available values are: ${f.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:b,setTabGroupChoices:T}=(0,l.U)(),[y,x]=(0,r.useState)(k),C=[],{blockElementScrollPositionUntilNextRender:F}=(0,p.o5)();if(null!=h){const e=b[h];null!=e&&e!==y&&f.some((t=>t.value===e))&&x(e)}const N=e=>{const t=e.currentTarget,n=C.indexOf(t),o=f[n].value;o!==y&&(F(t),x(o),null!=h&&T(h,String(o)))},D=e=>{var t;let n=null;switch(e.key){case"Enter":N(e);break;case"ArrowRight":{const t=C.indexOf(e.currentTarget)+1;n=C[t]??C[0];break}case"ArrowLeft":{const t=C.indexOf(e.currentTarget)-1;n=C[t]??C[C.length-1];break}}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,i.Z)("tabs-container",c)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":a},u)},f.map((e=>{let{value:t,label:n,attributes:a}=e;return r.createElement("li",(0,o.Z)({role:"tab",tabIndex:y===t?0:-1,"aria-selected":y===t,key:t,ref:e=>C.push(e),onKeyDown:D,onClick:N},a,{className:(0,i.Z)("tabs__item",m,null==a?void 0:a.className,{"tabs__item--active":y===t})}),n??t)}))),n?(0,r.cloneElement)(w.filter((e=>e.props.value===y))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},w.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==y})))))}function g(e){const t=(0,a.Z)();return r.createElement(d,(0,o.Z)({key:String(t)},e))}},40603:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>g,frontMatter:()=>s,metadata:()=>p,toc:()=>m});var o=n(2962),r=(n(59496),n(49613)),i=n(38637),a=n(45558);const s={title:"Tag"},l=void 0,p={unversionedId:"front/3d-space/handbook/react-hoc/tagging",id:"front/3d-space/handbook/react-hoc/tagging",title:"Tag",description:"Previous chapter recalls: points in three dimensions",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/front/3d-space/handbook/react-hoc/5.tagging.md",sourceDirName:"front/3d-space/handbook/react-hoc",slug:"/front/3d-space/handbook/react-hoc/tagging",permalink:"/en/docs/front/3d-space/handbook/react-hoc/tagging",draft:!1,tags:[],version:"current",lastUpdatedBy:"lichengjie",lastUpdatedAt:1669264964,formattedLastUpdatedAt:"Nov 24, 2022",sidebarPosition:5,frontMatter:{title:"Tag"},sidebar:"\u4e09\u7ef4\u7a7a\u95f4",previous:{title:"Points in 3D space",permalink:"/en/docs/front/3d-space/handbook/react-hoc/points-in-3d"},next:{title:"Beginning",permalink:"/en/docs/front/3d-space/handbook/react-hooks/get-started"}},c={},m=[{value:"Preparatory work",id:"preparatory-work",level:2},{value:"Developing Tag Features",id:"developing-tag-features",level:2},{value:"Add Tag Style",id:"add-tag-style",level:3},{value:"useFiveProject2d Description",id:"usefiveproject2d-description",level:3},{value:"Write TaggingController",id:"write-taggingcontroller",level:3},{value:"Use Tag Component",id:"use-tag-component",level:3}],d={toc:m};function g(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Previous chapter recalls: points in three dimensions")," ",(0,r.kt)("br",null),"\nyou understand the Live SDK event system and try to develop a small app to get a point of three-dimensional location by clicking on the event.")),(0,r.kt)("admonition",{title:"This chapter can learn to",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Set labels in three-dimensional space.")),(0,r.kt)("h2",{id:"preparatory-work"},"Preparatory work"),(0,r.kt)("p",null,"We create a new directory (",(0,r.kt)("inlineCode",{parentName:"p"},"src/5.tagging"),"and corresponding ",(0,r.kt)("strong",{parentName:"p"},"htm")," files and ",(0,r.kt)("strong",{parentName:"p"},"jsx")," or ",(0,r.kt)("strong",{parentName:"p"},"tsx")," files.\nThe ",(0,r.kt)("strong",{parentName:"p"},"State")," code with the previous chapter is too onerous, and we show the base development of the contents of ",(0,r.kt)("strong",{parentName:"p"},"the three-dimensional space")," chapter from ."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="src/5.tagging/index.html"',title:'"src/5.tagging/index.html"'},'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <link rel="icon" href="data:;base64,iVBORw0KGgo=">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>Tag | Tagging</title>\n  <style>\n    * { margin: 0; padding: 0; }\n    html, body #app { width: 100%; height: 100%; overflow: hidden; }\n  </style>\n</head>\n<body>\n  <div id="app"></div>\n  <script type="module" src="./index"><\/script>\n</body>\n</html>\n')),(0,r.kt)(i.Z,{mdxType:"Tabs"},(0,r.kt)(a.Z,{value:"JavaScript",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/withFetchWork.jsx"',title:'"src/5.tagging/withFetchWork.jsx"'},'import React, { Component } from "react";\nimport { parseWork } from "@realsee/five";\n\n/**\n * React HOC fetch work\n * @param url address of work.json\n */\nfunction withFetchWork(url) {\n  return function(Compnent) {\n    return class extends Component {\n      state = { work: null };\n      componentDidMount() {\n        fetch(url).then(res => res.json()).then(json => {\n          this.setState({ work: parseWork(json) });\n        });\n      }\n      render() {\n        if (this.state.work === null) return null;\n        return <Compnent work={this.state.work} {...this.props}/>;\n      }\n    }\n  }\n}\n\nexport { withFetchWork };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/withWindowDimensions.jsx"',title:'"src/5.tagging/withWindowDimensions.jsx"'},'import React, { Component } from "react";\n\n/**\n * React HOC: Get the size of the current window\n */\nfunction withWindowDimensions() {\n  return function(Compnent) {\n    return class extends Component {\n      state = this.getWindowDimensions();\n      resizeListener = () => {\n        this.setState(this.getWindowDimensions());\n      };\n      getWindowDimensions() {\n        return { width: window.innerWidth, height: window.innerHeight };\n      }\n      componentDidMount() {\n        window.addEventListener("resize", this.resizeListener, false);\n      }\n      componentWillUnmount() {\n        window.removeEventListener("resize", this.resizeListener, false);\n      }\n      render() {\n        const dimensions = { width: this.state.width, height: this.state.height };\n        return <Compnent windowDimensions={dimensions} {...this.props}/>;\n      }\n    }\n  }\n}\n\nexport { withWindowDimensions };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/ModeController.jsx"',title:'"src/5.tagging/ModeController.jsx"'},'import React, { Component } from "react";\nimport { Five } from "@realsee/five";\nimport { withFive, createFiveFeature } from "@realsee/five/react";\nimport { compose } from "@wordpress/compose";\nimport BottomNavigation from "@mui/material/BottomNavigation";\nimport BottomNavigationAction from "@mui/material/BottomNavigationAction";\nimport Paper from "@mui/material/Paper";\nimport DirectionsWalkIcon from "@mui/icons-material/DirectionsWalk";\nimport ViewInArIcon from "@mui/icons-material/ViewInAr";\n\nconst FEATURES = createFiveFeature("currentState", "setState");\n\n/**\n * React Component: Modal Control\n */\nconst ModeController = compose(\n  withFive(FEATURES)\n)(class extends Component {\n  render() {\n    return <Paper sx={{ position: "fixed", bottom: 0, left: 0, right: 0 }}>\n      <BottomNavigation\n        showLabels\n        value={this.props.$five.currentState.mode}\n        onChange={(_, newValue) => {\n          this.props.$five.setState({ mode: newValue });\n        }}\n      >\n        <BottomNavigationAction label="Panorama roaming" icon={<DirectionsWalkIcon/>} value={Five.Mode.Panorama}/>\n        <BottomNavigationAction label="Space overview" icon={<ViewInArIcon/>} value={Five.Mode.Floorplan}/>\n      </BottomNavigation>\n    </Paper>;\n  }\n})\n\nexport { ModeController };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/App.jsx"',title:'"src/5.tagging/App.jsx"'},'import React, { Component } from "react";\nimport { compose } from "@wordpress/compose";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { withFetchWork } from "./withFetchWork";\nimport { withWindowDimensions } from "./withWindowDimensions";\nimport { ModeController } from "./ModeController";\n\n/** Data URL of work.json */\nconst workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\n\nconst App = compose(\n  withFetchWork(workURL),\n  withWindowDimensions()\n)(class extends Component {\n  render() {\n    const { work, windowDimensions } = this.props;\n    return <FiveProvider initialWork={work}>\n      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>\n      <ModeController/>;\n    </FiveProvider>;\n  }\n});\n\nexport { App };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/index.jsx"',title:'"src/5.tagging/index.jsx"'},'import React from "react";\nimport ReactDOM from "react-dom";\nimport { App } from "./App";\n\nReactDOM.render(<App/>, document.querySelector("#app"));\n\nexport {};\n'))),(0,r.kt)(a.Z,{value:"TypeScript",label:"TypeScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/withFetchWork.tsx"',title:'"src/5.tagging/withFetchWork.tsx"'},'import React, { Component, ComponentClass } from "react";\nimport { Work, parseWork } from "@realsee/five";\n\n/**\n * React HOC for work\n * @param url work. The address of the son\n */\nfunction withFetchWork<P extends Record<string, any>>(url: string) {\n  return function(Compnent: ComponentClass<P & { work: Work }>): ComponentClass<P> {\n    return class extends Component<P, {work: Work | null}> {\n      state = { work: null };\n      componentDidMount() {\n        fetch(url).then(res => res.json()).then(json => {\n          this.setState({ work: parseWork(json) });\n        });\n      }\n      render() {\n        if (this.state.work === null) return null;\n        return <Compnent work={this.state.work} {...this.props}/>;\n      }\n    }\n  }\n}\n\nexport { withFetchWork };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/useWindowDimensions.tsx"',title:'"src/5.tagging/useWindowDimensions.tsx"'},'import React, { Component, ComponentClass } from "react";\n\n/**\n * React HOC: Get the current window size\n */\nfunction withWindowDimensions<P extends Record<string, any>>() {\n  return function(Compnent: ComponentClass<P & { windowDimensions: { width: number, height: number} }>): ComponentClass<P> {\n    return class extends Component<P, {width: number, height: number}> {\n      state = this.getWindowDimensions();\n      resizeListener = () => {\n        this.setState(this.getWindowDimensions());\n      };\n      getWindowDimensions() {\n        return { width: window.innerWidth, height: window.innerHeight };\n      }\n      componentDidMount() {\n        window.addEventListener("resize", this.resizeListener, false);\n      }\n      componentWillUnmount() {\n        window.removeEventListener("resize", this.resizeListener, false);\n      }\n      render() {\n        const dimensions = { width: this.state.width, height: this.state.height };\n        return <Compnent windowDimensions={dimensions} {...this.props}/>;\n      }\n    }\n  }\n}\n\nexport { withWindowDimensions };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/ModeController.tsx"',title:'"src/5.tagging/ModeController.tsx"'},'import React, { Component } from "react";\nimport { Five, Mode } from "@realsee/five";\nimport { withFive, createFiveFeature, PropTypeOfFiveFeatures } from "@realsee/five/react";\nimport { compose } from "@wordpress/compose";\nimport BottomNavigation from "@mui/material/BottomNavigation";\nimport BottomNavigationAction from "@mui/material/BottomNavigationAction";\nimport Paper from "@mui/material/Paper";\nimport DirectionsWalkIcon from "@mui/icons-material/DirectionsWalk";\nimport ViewInArIcon from "@mui/icons-material/ViewInAr";\n\nconst FEATURES = createFiveFeature("currentState", "setState");\ntype Props = PropTypeOfFiveFeatures<typeof FEATURES>;\n\n/**\n * React Component: Model Control\n */\nconst ModeController = compose(\n  withFive(FEATURES)\n)(class extends Component<Props> {\n  render() {\n    return <Paper sx={{ position: "fixed", bottom: 0, left: 0, right: 0 }}>\n      <BottomNavigation\n        showLabels\n        value={this.props.$five.currentState.mode}\n        onChange={(_, newValue: Mode) => {\n          this.props.$five.setState({ mode: newValue });\n        }}\n      >\n        <BottomNavigationAction label="Panorama roaming" icon={<DirectionsWalkIcon/>} value={Five.Mode.Panorama}/>\n        <BottomNavigationAction label="Space overview" icon={<ViewInArIcon/>} value={Five.Mode.Floorplan}/>\n      </BottomNavigation>\n    </Paper>;\n  }\n})\n\nexport { ModeController };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/App.tsx"',title:'"src/5.tagging/App.tsx"'},'import React, { Component } from "react";\nimport { Work } from "@realsee/five";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { compose } from "@wordpress/compose";\nimport { withFetchWork } from "./withFetchWork";\nimport { withWindowDimensions } from "./withWindowDimensions";\nimport { ModeController } from "./ModeController";\n\n/** Data URL of work.json */\nconst workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\n\nconst App = compose(\n  withFetchWork(workURL),\n  withWindowDimensions()\n)(class extends Component<{work: Work, windowDimensions: { width: number, height: number }}> {\n  render() {\n    const { work, windowDimensions } = this.props;\n    return <FiveProvider initialWork={work}>\n      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>\n      <ModeController/>\n    </FiveProvider>;\n  }\n});\n\n\nexport { App };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/index.tsx"',title:'"src/5.tagging/index.tsx"'},'import React from "react";\nimport ReactDOM from "react-dom";\nimport { App } from "./App";\n\nReactDOM.render(<App/>, document.querySelector("#app"));\n\nexport {};\n')))),(0,r.kt)("p",null,"Start service ",(0,r.kt)("inlineCode",{parentName:"p"},"npm run dev"),' and jump to the current page "http://localhost:3000/src/5.tagging/index.html".'),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Please see your console. The port number will change due to your configuration and current port occupancy, please check the console output. If you use another development build tool, please start the service as required by your own development build tool.")),(0,r.kt)("h2",{id:"developing-tag-features"},"Developing Tag Features"),(0,r.kt)("h3",{id:"add-tag-style"},"Add Tag Style"),(0,r.kt)("p",null,"Add a tag style to the ",(0,r.kt)("strong",{parentName:"p"},"html"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Style is not necessary, it is only for better labels.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="src/5.tagging/index.html"',title:'"src/5.tagging/index.html"'},'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <link rel="icon" href="data:;base64,iVBORw0KGgo=">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>Tag | Tagging</title>\n  <style>\n    * { margin: 0; padding: 0; }\n    html, body #app { width: 100%; height: 100%; overflow: hidden; }\n    /* highlight-start */\n    .tag { position: absolute; width: 0; height: 0; transform: translateZ(0); }\n    .tag-pannel { position: absolute; width: 100px; min-height: 20px; transform: translate(-50%, 0); left: 50%; bottom: 10px; background: #333; color: #fff; border-radius: 2px; text-align: center; line-height: 20px; padding: 8px; font-size: 14px;}\n    .tag-pannel:after { content: ""; display: block; position: absolute; width: 10px; height: 10px; left: 50%; bottom: -5px; transform: translate(-50%, 0) rotate(45deg); background: #333; pointer-events: none; }\n    /* highlight-end */\n  </style>\n</head>\n<body>\n  <div id="app"></div>\n  <script type="module" src="./index"><\/script>\n</body>\n</html>\n')),(0,r.kt)("h3",{id:"usefiveproject2d-description"},"useFiveProject2d Description"),(0,r.kt)("p",null,"This chapter will use the ",(0,r.kt)("a",{parentName:"p",href:"https://unpkg.com/@realsee/five/docs/modules/react.html#useFiveProject2d"},(0,r.kt)("inlineCode",{parentName:"a"},"useFiveProject2d"))," method.He can match the three-dimensional coordinates to the screen."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"$five.project2d(vector: THREE.Vector3, testModel: boolean): THREE.Vector2 | null")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Incoming a three-dimensional coordinates to get a 2D coordinates of the screen, starting at the top of the left in pixels.Can be used as ",(0,r.kt)("inlineCode",{parentName:"li"},'{ left: returnValue.x + "px", top: returnValue.y + "px" }')," etc."),(0,r.kt)("li",{parentName:"ol"},"If three-dimensional coordinates cannot be calculated in the screen (e.g. behind or blocked), then return ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),"."),(0,r.kt)("li",{parentName:"ol"},"The second parameter ",(0,r.kt)("strong",{parentName:"li"},"testModel")," is calculated if the model collided, i.e. if the coordinate blocked by the model is ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),".")),(0,r.kt)("h3",{id:"write-taggingcontroller"},"Write TaggingController"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Add a ",(0,r.kt)("strong",{parentName:"li"},"TaggingController")," file to write components."),(0,r.kt)("li",{parentName:"ol"},"Store labels and text with ",(0,r.kt)("inlineCode",{parentName:"li"},"tags")," React state"),(0,r.kt)("li",{parentName:"ol"},"Store newly created tags with ",(0,r.kt)("inlineCode",{parentName:"li"},"newTag")," React state"),(0,r.kt)("li",{parentName:"ol"},"Listen to the ",(0,r.kt)("inlineCode",{parentName:"li"},"intersectionOnModelUpdate")," event to place the newly created tab in the mouse position."),(0,r.kt)("li",{parentName:"ol"},"Call ",(0,r.kt)("inlineCode",{parentName:"li"},"$five.project2")," method (",(0,r.kt)("inlineCode",{parentName:"li"},"tagElement")," method) to get screen canvas coordinates and render by changing styles.")),(0,r.kt)(i.Z,{mdxType:"Tabs"},(0,r.kt)(a.Z,{value:"JavaScript",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/TaggingController.jsx"',title:'"src/5.tagging/TaggingController.jsx"'},'import React, { Component } from "react";\nimport { compose } from "@wordpress/compose";\nimport { withFive, createFiveFeature } from "@realsee/five/react";\nimport Button from "@mui/material/Button";\nimport Paper from "@mui/material/Paper";\n\nconst FEATURES = createFiveFeature("project2d", "currentState", "on", "off");\n\n/**\n * React Component: Tag\n */\nconst TaggingController = compose(\n  withFive(FEATURES)\n)(class extends Component {\n\n  state = { tags: [], newTag: null };\n\n  addTag = ( ) => {\n    this.setState({ newTag: { label: window.prompt("Add Tag", "") || "Untitled" } });\n  }\n\n  tagElement(tag, key) {\n    const position = tag.position && this.props.$five.project2d(tag.position, true);\n    const style = position ? { left: position.x, top: position.y } : { display: "none" };\n    return <div className="tag" style={style} key={key}>\n      <div className="tag-pannel"><span className="tag-content">{tag.label}</span></div>\n    </div>\n  }\n\n  onIntersectionUpdate = intersect => {\n    if (this.state.newTag) this.setState({ newTag: { position: intersect.point, label: this.state.newTag.label } });\n  };\n\n  onTapGesture = () => {\n    if (this.state.newTag && this.state.newTag.position) {\n      this.setState({\n        tags: this.state.tags.concat(this.state.newTag),\n        newTag: null\n      });\n      return false;\n    }\n  };\n\n  componentDidMount() {\n    this.props.$five.on("intersectionOnModelUpdate", this.onIntersectionUpdate);\n    this.props.$five.on("wantsTapGesture", this.onTapGesture);\n  }\n\n  componentWillUnmount() {\n    this.props.$five.off("intersectionOnModelUpdate", this.onIntersectionUpdate);\n    this.props.$five.off("wantsTapGesture", this.onTapGesture);\n  }\n\n  render() {\n    return <React.Fragment>\n      <Paper sx={{ position: "fixed", top: 10, left: 10 }}>\n        <Button onClick={this.addTag}>Tag</Button>\n      </Paper>\n        {this.state.newTag && this.tagElement(this.state.newTag)}\n        {this.state.tags.map((tag, index) => this.tagElement(tag, index))}\n    </React.Fragment>;\n  }\n});\n\nexport { TaggingController };\n'))),(0,r.kt)(a.Z,{value:"TypeScript",label:"TypeScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/TaggingController.tsx"',title:'"src/5.tagging/TaggingController.tsx"'},'import * as THREE from "three";\nimport React, { Component } from "react";\nimport { compose } from "@wordpress/compose";\nimport { EventCallback } from "@realsee/five";\nimport { withFive, createFiveFeature, PropTypeOfFiveFeatures } from "@realsee/five/react";\nimport Button from "@mui/material/Button";\nimport Paper from "@mui/material/Paper";\n\ntype Tag = { position?: THREE.Vector3, label: string };\n\nconst FEATURES = createFiveFeature("project2d", "currentState", "on", "off");\ntype Props = PropTypeOfFiveFeatures<typeof FEATURES>;\ntype State = {\n  tags: Tag[],\n  newTag: Tag | null\n};\n\n/**\n * React Compont: Tag\n */\nconst TaggingController = compose(\n  withFive(FEATURES)\n)(class extends Component<Props, State> {\n\n  state: State = { tags: [], newTag: null };\n\n  addTag = () => {\n    this.setState({ newTag: { label: window.prompt("\u6dfb\u52a0\u6807\u7b7e", "") || "\u672a\u547d\u540d" } });\n  }\n\n  tagElement(tag: Tag, key?: number | string) {\n    const position = tag.position && this.props.$five.project2d(tag.position, true);\n    const style = position ? { left: position.x, top: position.y } : { display: "none" };\n    return <div className="tag" style={style} key={key}>\n      <div className="tag-pannel"><span className="tag-content">{tag.label}</span></div>\n    </div>\n  }\n\n  onIntersectionUpdate: EventCallback["intersectionOnModelUpdate"] = intersect => {\n    if (this.state.newTag) this.setState({ newTag: { position: intersect.point, label: this.state.newTag.label } });\n  };\n\n  onTapGesture: EventCallback["wantsTapGesture"] = () => {\n    if (this.state.newTag && this.state.newTag.position) {\n      this.setState({\n        tags: this.state.tags.concat(this.state.newTag),\n        newTag: null\n      });\n      return false;\n    }\n  };\n\n  componentDidMount() {\n    this.props.$five.on("intersectionOnModelUpdate", this.onIntersectionUpdate);\n    this.props.$five.on("wantsTapGesture", this.onTapGesture);\n  }\n\n  componentWillUnmount() {\n    this.props.$five.off("intersectionOnModelUpdate", this.onIntersectionUpdate);\n    this.props.$five.off("wantsTapGesture", this.onTapGesture);\n  }\n\n  render() {\n    return <React.Fragment>\n      <Paper sx={{ position: "fixed", top: 10, left: 10 }}>\n        <Button onClick={this.addTag}>Tag</Button>\n      </Paper>\n        {this.state.newTag && this.tagElement(this.state.newTag)}\n        {this.state.tags.map((tag, index) => this.tagElement(tag, index))}\n    </React.Fragment>;\n  }\n});\n\nexport { TaggingController };\n')))),(0,r.kt)("h3",{id:"use-tag-component"},"Use Tag Component"),(0,r.kt)("p",null,"Insert into ",(0,r.kt)("strong",{parentName:"p"},"App")," file ",(0,r.kt)("strong",{parentName:"p"},"GiveProvider")),(0,r.kt)(i.Z,{mdxType:"Tabs"},(0,r.kt)(a.Z,{value:"JavaScript",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/App.jsx"',title:'"src/5.tagging/App.jsx"'},'import React, { Component } from "react";\nimport { compose } from "@wordpress/compose";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { withFetchWork } from "./withFetchWork";\nimport { withWindowDimensions } from "./withWindowDimensions";\nimport { ModeController } from "./ModeController";\n// highlight-start\nimport { TaggingController } from "./TaggingController";\n// highlight-end\n\n/** Data URL of work.json */\nconst workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\n\nconst App = compose(\n  withFetchWork(workURL),\n  withWindowDimensions()\n)(class extends Component {\n  render() {\n    const { work, windowDimensions } = this.props;\n    return <FiveProvider initialWork={work}>\n      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>\n      <ModeController/>;\n      // highlight-start\n      <TaggingController/>;\n      // highlight-end\n    </FiveProvider>;\n  }\n});\n\nexport { App };\n'))),(0,r.kt)(a.Z,{value:"TypeScript",label:"TypeScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/App.tsx"',title:'"src/5.tagging/App.tsx"'},'import React, { Component } from "react";\nimport { Work } from "@realsee/five";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { compose } from "@wordpress/compose";\nimport { withFetchWork } from "./withFetchWork";\nimport { withWindowDimensions } from "./withWindowDimensions";\nimport { ModeController } from "./ModeController";\n// highlight-start\nimport { TaggingController } from "./TaggingController";\n// highlight-end\n\n/** Data URL of work.json */\nconst workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\n\nconst App = compose(\n  withFetchWork(workURL),\n  withWindowDimensions()\n)(class extends Component<{work: Work, windowDimensions: { width: number, height: number }}> {\n  render() {\n    const { work, windowDimensions } = this.props;\n    return <FiveProvider initialWork={work}>\n      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>\n      <ModeController/>\n      // highlight-start\n      <TaggingController/>\n      // highlight-end\n    </FiveProvider>;\n  }\n});\n\n\nexport { App };\n')))),(0,r.kt)("p",null,"Back to your browser to view it, you will find a tabs button in the upper left corner of your page, click on, fill in the tag name, then move the mouse and click in the position you need.Tag can be placed."),(0,r.kt)("p",null,"Well, it is a functional feature: partying_face:"))}g.isMDXComponent=!0}}]);