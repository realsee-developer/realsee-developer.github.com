"use strict";(self.webpackChunkrealsee_developer_github_com=self.webpackChunkrealsee_developer_github_com||[]).push([[3923],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>u});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},m="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(n),d=r,u=m["".concat(l,".").concat(d)]||m[d]||g[d]||a;return n?o.createElement(u,i(i({ref:t},p),{},{components:n})):o.createElement(u,i({ref:t},p))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(67294),r=n(86010);const a={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:n,className:i}=e;return o.createElement("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,i),hidden:n},t)}},65488:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(87462),r=n(67294),a=n(86010),i=n(72389),s=n(67392),l=n(7094),c=n(12466);const p={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function m(e){const{lazy:t,block:n,defaultValue:i,values:m,groupId:g,className:d}=e,u=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),h=m??u.map((e=>{let{props:{value:t,label:n,attributes:o}}=e;return{value:t,label:n,attributes:o}})),v=(0,s.l)(h,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const k=null===i?i:i??u.find((e=>e.props.default))?.props.value??u[0].props.value;if(null!==k&&!h.some((e=>e.value===k)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${k}" but none of its children has the corresponding value. Available values are: ${h.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:f,setTabGroupChoices:w}=(0,l.U)(),[b,T]=(0,r.useState)(k),y=[],{blockElementScrollPositionUntilNextRender:x}=(0,c.o5)();if(null!=g){const e=f[g];null!=e&&e!==b&&h.some((t=>t.value===e))&&T(e)}const N=e=>{const t=e.currentTarget,n=y.indexOf(t),o=h[n].value;o!==b&&(x(t),T(o),null!=g&&w(g,String(o)))},C=e=>{let t=null;switch(e.key){case"Enter":N(e);break;case"ArrowRight":{const n=y.indexOf(e.currentTarget)+1;t=y[n]??y[0];break}case"ArrowLeft":{const n=y.indexOf(e.currentTarget)-1;t=y[n]??y[y.length-1];break}}t?.focus()};return r.createElement("div",{className:(0,a.Z)("tabs-container",p.tabList)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},d)},h.map((e=>{let{value:t,label:n,attributes:i}=e;return r.createElement("li",(0,o.Z)({role:"tab",tabIndex:b===t?0:-1,"aria-selected":b===t,key:t,ref:e=>y.push(e),onKeyDown:C,onClick:N},i,{className:(0,a.Z)("tabs__item",p.tabItem,i?.className,{"tabs__item--active":b===t})}),n??t)}))),t?(0,r.cloneElement)(u.filter((e=>e.props.value===b))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},u.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==b})))))}function g(e){const t=(0,i.Z)();return r.createElement(m,(0,o.Z)({key:String(t)},e))}},79746:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>c,toc:()=>m});var o=n(87462),r=(n(67294),n(3905)),a=n(65488),i=n(85162);const s={title:"Tag"},l=void 0,c={unversionedId:"front/3d-space/handbook/react-hooks/tagging",id:"front/3d-space/handbook/react-hooks/tagging",title:"Tag",description:"Previous chapter recalls: points in three dimensions",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/front/3d-space/handbook/react-hooks/5.tagging.md",sourceDirName:"front/3d-space/handbook/react-hooks",slug:"/front/3d-space/handbook/react-hooks/tagging",permalink:"/en/docs/front/3d-space/handbook/react-hooks/tagging",draft:!1,tags:[],version:"current",lastUpdatedBy:"sansi.lcj",lastUpdatedAt:1669717185,formattedLastUpdatedAt:"Nov 29, 2022",sidebarPosition:5,frontMatter:{title:"Tag"},sidebar:"\u4e09\u7ef4\u7a7a\u95f4",previous:{title:"Points in 3D space",permalink:"/en/docs/front/3d-space/handbook/react-hooks/points-in-3d"},next:{title:"Beginning",permalink:"/en/docs/front/3d-space/handbook/vue/get-started"}},p={},m=[{value:"Preparatory work",id:"preparatory-work",level:2},{value:"Developing Tag Features",id:"developing-tag-features",level:2},{value:"Add Tag Style",id:"add-tag-style",level:3},{value:"useFiveProject2d Description",id:"usefiveproject2d-description",level:3},{value:"Write TaggingController",id:"write-taggingcontroller",level:3},{value:"Use Tag Component",id:"use-tag-component",level:3}],g={toc:m},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,o.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Previous chapter recalls: points in three dimensions")," ",(0,r.kt)("br",null),"\nyou understand the Live SDK event system and try to develop a small app to get a point of three-dimensional location by clicking on the event.")),(0,r.kt)("admonition",{title:"This chapter can learn to",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Set labels in three-dimensional space.")),(0,r.kt)("h2",{id:"preparatory-work"},"Preparatory work"),(0,r.kt)("p",null,"We create a new directory (",(0,r.kt)("inlineCode",{parentName:"p"},"src/5.tagging"),"and corresponding ",(0,r.kt)("strong",{parentName:"p"},"htm")," files and ",(0,r.kt)("strong",{parentName:"p"},"jsx")," or ",(0,r.kt)("strong",{parentName:"p"},"tsx")," files. The ",(0,r.kt)("strong",{parentName:"p"},"State")," code with the previous chapter is too onerous, and we show the base development of the contents of ",(0,r.kt)("strong",{parentName:"p"},"the three-dimensional space")," chapter from."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="src/5.tagging/index.html"',title:'"src/5.tagging/index.html"'},'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <link rel="icon" href="data:;base64,iVBORw0KGgo=" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Tag | Tagging</title>\n    <style>\n      * {\n        margin: 0;\n        padding: 0;\n      }\n      html,\n      body #app {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n      }\n    </style>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="./index"><\/script>\n  </body>\n</html>\n')),(0,r.kt)(a.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"JavaScript",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/5.tagging/useFetchWork.js"',title:'"src/5.tagging/useFetchWork.js"'},'import { useState, useEffect } from "react";\nimport { parseWork } from "@realsee/five";\n\n/**\n * React Hook: via work. json address get work object\n * @param url work.json data address\n * @returns work object, if getting, return null\n */\nfunction useFetchWork(url) {\n  const [work, setWork] = useState(null);\n  useEffect(() => {\n    setWork(null);\n    fetch(url)\n      .then((response) => response.text())\n      .then((text) => setWork(parseWork(text)));\n  }, [url]);\n  return work;\n}\n\nexport { useFetchWork };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/5.tagging/useWindowDimensions.js"',title:'"src/5.tagging/useWindowDimensions.js"'},'import { useState, useEffect } from "react";\n\n/**\n * Get the size of the current window\n */\nfunction getWindowDimensions() {\n  return { width: window.innerWidth, height: window.innerHeight };\n}\n\n/**\n * React Hook: Get the size of the current window\n */\nfunction useWindowDimensions() {\n  const [size, setSize] = useState(getWindowDimensions);\n  useEffect(() => {\n    const listener = () => setSize(getWindowDimensions());\n    window.addEventListener("resize", listener, false);\n    return () => window.removeEventListener("resize", listener, false);\n  });\n  return size;\n}\n\nexport { useWindowDimensions };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/ModeController.jsx"',title:'"src/5.tagging/ModeController.jsx"'},'import React from "react";\nimport { Five } from "@realsee/five";\nimport { useFiveCurrentState } from "@realsee/five/react";\nimport BottomNavigation from "@mui/material/BottomNavigation";\nimport BottomNavigationAction from "@mui/material/BottomNavigationAction";\nimport Paper from "@mui/material/Paper";\nimport DirectionsWalkIcon from "@mui/icons-material/DirectionsWalk";\nimport ViewInArIcon from "@mui/icons-material/ViewInAr";\n\n/**\n * React Component: Modal Control\n */\nconst ModeController = () => {\n  const [state, setState] = useFiveCurrentState();\n  return (\n    <Paper sx={{ position: "fixed", bottom: 0, left: 0, right: 0 }}>\n      <BottomNavigation\n        showLabels\n        value={state.mode}\n        onChange={(_, newValue) => {\n          setState({ mode: newValue });\n        }}\n      >\n        <BottomNavigationAction\n          label="Panorama roaming"\n          icon={<DirectionsWalkIcon />}\n          value={Five.Mode.Panorama}\n        />\n        <BottomNavigationAction\n          label="Space overview"\n          icon={<ViewInArIcon />}\n          value={Five.Mode.Floorplan}\n        />\n      </BottomNavigation>\n    </Paper>\n  );\n};\n\nexport { ModeController };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/App.jsx"',title:'"src/5.tagging/App.jsx"'},'import React from "react";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { useFetchWork } from "./useFetchWork";\nimport { useWindowDimensions } from "./useWindowDimensions";\nimport { ModeController } from "./ModeController";\n\n/** work. The data URL */\nconst workURL =\n  "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\nconst App = () => {\n  const work = useFetchWork(workURL);\n  const size = useWindowDimensions();\n  return (\n    work && (\n      <FiveProvider initialWork={work}>\n        <FiveCanvas {...size} />\n        <ModeController />\n      </FiveProvider>\n    )\n  );\n};\n\nexport { App };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/index.jsx"',title:'"src/5.tagging/index.jsx"'},'import React from "react";\nimport ReactDOM from "react-dom";\nimport { App } from "./App";\n\nReactDOM.render(<App />, document.querySelector("#app"));\n\nexport {};\n'))),(0,r.kt)(i.Z,{value:"TypeScript",label:"TypeScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/5.tagging/useFetchWork.ts"',title:'"src/5.tagging/useFetchWork.ts"'},'import { useState, useEffect } from "react";\nimport { Work, parseWork } from "@realsee/five";\n\n/**\n * React Hook: through work. Son addresses get work object\n * @param url work. Son data address\n * @returns work object if fetching, Recall null\n */\nfunction useFetchWork(url: string) {\n  const [work, setWork] = useState<Work | null>(null);\n  useEffect(() => {\n    setWork(null);\n    fetch(url)\n      .then((response) => response.text())\n      .then((text) => setWork(parseWork(text)));\n  }, [url]);\n  return work;\n}\n\nexport { useFetchWork };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/5.tagging/useWindowDimensions.ts"',title:'"src/5.tagging/useWindowDimensions.ts"'},'import { useState, useEffect } from "react";\n\n/**\n * - Get the size of the current window\n */\nfunction getWindowDimensions() {\n  return { width: window.innerWidth, height: window.innerHeight };\n}\n\n/**\n * - React Hook: Get the size of the current window\n */\nfunction useWindowDimensions() {\n  const [size, setSize] = useState(getWindowDimensions);\n  useEffect(() => {\n    const listener = () => setSize(getWindowDimensions());\n    window.addEventListener("resize", listener, false);\n    return () => window.removeEventListener("resize", listener, false);\n  });\n  return size;\n}\n\nexport { useWindowDimensions };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/ModeController.tsx"',title:'"src/5.tagging/ModeController.tsx"'},'import React, { FC } from "react";\nimport { Five, Mode } from "@realsee/five";\nimport { useFiveCurrentState } from "@realsee/five/react";\nimport BottomNavigation from "@mui/material/BottomNavigation";\nimport BottomNavigationAction from "@mui/material/BottomNavigationAction";\nimport Paper from "@mui/material/Paper";\nimport DirectionsWalkIcon from "@mui/icons-material/DirectionsWalk";\nimport ViewInArIcon from "@mui/icons-material/ViewInAr";\n\n/**\n * React Component : ModeController: Mode Controler\n */\nconst ModeController: FC = () => {\n  const [state, setState] = useFiveCurrentState();\n  return (\n    <Paper sx={{ position: "fixed", bottom: 0, left: 0, right: 0 }}>\n      <BottomNavigation\n        showLabels\n        value={state.mode}\n        onChange={(_, newValue: Mode) => {\n          setState({ mode: newValue });\n        }}\n      >\n        <BottomNavigationAction\n          label="Panorama roaming"\n          icon={<DirectionsWalkIcon />}\n          value={Five.Mode.Panorama}\n        />\n        <BottomNavigationAction\n          label="Space overview"\n          icon={<ViewInArIcon />}\n          value={Five.Mode.Floorplan}\n        />\n      </BottomNavigation>\n    </Paper>\n  );\n};\n\nexport { ModeController };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/App.tsx"',title:'"src/5.tagging/App.tsx"'},'import React, { FC } from "react";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { useFetchWork } from "./useFetchWork";\nimport { useWindowDimensions } from "./useWindowDimensions";\nimport { ModeController } from "./ModeController";\n\n/** data URL of work.json */\nconst workURL =\n  "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\nconst App: FC = () => {\n  const work = useFetchWork(workURL);\n  const size = useWindowDimensions();\n  return (\n    work && (\n      <FiveProvider initialWork={work}>\n        <FiveCanvas {...size} />\n        <ModeController />\n      </FiveProvider>\n    )\n  );\n};\n\nexport { App };\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/index.tsx"',title:'"src/5.tagging/index.tsx"'},'import React from "react";\nimport ReactDOM from "react-dom";\nimport { App } from "./App";\n\nReactDOM.render(<App />, document.querySelector("#app"));\n\nexport {};\n')))),(0,r.kt)("p",null,"Start service ",(0,r.kt)("inlineCode",{parentName:"p"},"npm run dev"),' and jump to the current page "http://localhost:3000/src/5.tagging/index.html".'),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Please see your console. The port number will change due to your configuration and current port occupancy, please check the console output. If you use another development build tool, please start the service as required by your own development build tool.")),(0,r.kt)("h2",{id:"developing-tag-features"},"Developing Tag Features"),(0,r.kt)("h3",{id:"add-tag-style"},"Add Tag Style"),(0,r.kt)("p",null,"Add a tag style to the ",(0,r.kt)("strong",{parentName:"p"},"html"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Style is not necessary, it is only for better labels.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="src/5.tagging/index.html"',title:'"src/5.tagging/index.html"'},'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <link rel="icon" href="data:;base64,iVBORw0KGgo=" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Tag | Tagging</title>\n    <style>\n      * {\n        margin: 0;\n        padding: 0;\n      }\n      html,\n      body #app {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n      }\n      /* highlight-start */\n      .tag {\n        position: absolute;\n        width: 0;\n        height: 0;\n        transform: translateZ(0);\n      }\n      .tag-pannel {\n        position: absolute;\n        width: 100px;\n        min-height: 20px;\n        transform: translate(-50%, 0);\n        left: 50%;\n        bottom: 10px;\n        background: #333;\n        color: #fff;\n        border-radius: 2px;\n        text-align: center;\n        line-height: 20px;\n        padding: 8px;\n        font-size: 14px;\n      }\n      .tag-pannel:after {\n        content: "";\n        display: block;\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        left: 50%;\n        bottom: -5px;\n        transform: translate(-50%, 0) rotate(45deg);\n        background: #333;\n        pointer-events: none;\n      }\n      /* highlight-end */\n    </style>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="./index"><\/script>\n  </body>\n</html>\n')),(0,r.kt)("h3",{id:"usefiveproject2d-description"},"useFiveProject2d Description"),(0,r.kt)("p",null,"This chapter will use the ",(0,r.kt)("a",{parentName:"p",href:"https://unpkg.com/@realsee/five/docs/modules/react.html#useFiveProject2d"},(0,r.kt)("inlineCode",{parentName:"a"},"useFiveProject2d"))," method.He can match the three-dimensional coordinates to the 2D screen."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useFiveProject2d (vector: THREE.Vector3, testModel: boolean): THREE.Vector2 | null")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Incoming a three-dimensional coordinates to get a 2D coordinates of the screen, starting at the top of the left in pixels.Can be used as ",(0,r.kt)("inlineCode",{parentName:"li"},'{ left: returnValue.x + "px", top: returnValue.y + "px" }')," etc."),(0,r.kt)("li",{parentName:"ol"},"If three-dimensional coordinates cannot be calculated in the screen (e.g. behind or blocked), then return ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),"."),(0,r.kt)("li",{parentName:"ol"},"The second parameter ",(0,r.kt)("strong",{parentName:"li"},"testModel")," is calculated if the model collided, i.e. if the coordinate blocked by the model is ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),".")),(0,r.kt)("h3",{id:"write-taggingcontroller"},"Write TaggingController"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Add a ",(0,r.kt)("strong",{parentName:"li"},"TaggingController")," file to write components."),(0,r.kt)("li",{parentName:"ol"},"Store labels and text with ",(0,r.kt)("inlineCode",{parentName:"li"},"tags")," React state"),(0,r.kt)("li",{parentName:"ol"},"Store newly created tags with ",(0,r.kt)("inlineCode",{parentName:"li"},"newTag")," React state"),(0,r.kt)("li",{parentName:"ol"},"Listen to the ",(0,r.kt)("inlineCode",{parentName:"li"},"intersectionOnModelUpdate")," event to place the newly created tab in the mouse position."),(0,r.kt)("li",{parentName:"ol"},"Call ",(0,r.kt)("strong",{parentName:"li"},"useProject2")," with a tag ",(0,r.kt)("inlineCode",{parentName:"li"},"project2")," method (in",(0,r.kt)("inlineCode",{parentName:"li"},"tagElement")," ) to get the screen canvas coordinates and render them by changing styles.")),(0,r.kt)(a.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"JavaScript",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/TaggingController.jsx"',title:'"src/5.tagging/TaggingController.jsx"'},'import React, { useState, useCallback } from "react";\nimport { useFiveEventCallback, useFiveProject2d } from "@realsee/five/react";\nimport Button from "@mui/material/Button";\nimport Paper from "@mui/material/Paper";\n\n/**\n * React Component: Tag\n */\nconst TaggingController = () => {\n  const project2d = useFiveProject2d();\n\n  const [tags, setTags] = useState([]);\n  const [newTag, setNewTag] = useState(null);\n\n  const tagElement = useCallback((tag, key) => {\n    const position = tag.position && project2d(tag.position, true);\n    const style = position\n      ? { left: position.x, top: position.y }\n      : { display: "none" };\n    return (\n      <div className="tag" style={style} key={key}>\n        <div className="tag-pannel">\n          <span className="tag-content">{tag.label}</span>\n        </div>\n      </div>\n    );\n  }, []);\n\n  const addTag = useCallback(() => {\n    setNewTag({ label: window.prompt("Add Tag", "") || "Untitled" });\n  }, []) ;\n\n  useFiveEventCallback(\n    "intersectionOnModelUpdate",\n    (intersect) => {\n      if (newTag) setNewTag({ position: intersect.point, label: newTag.label });\n    },\n    [newTag]\n  );\n\n  useFiveEventCallback(\n    "wantsTapGesture",\n    (raycaster) => {\n      if (newTag && newTag.position) {\n        setTags((tags) => tags.concat(newTag));\n        setNewTag(null);\n        return false;\n      }\n    },\n    [newTag]\n  );\n\n  return (\n    <React.Fragment>\n      <Paper sx={{ position: "fixed", top: 10, left: 10 }}>\n        <Button onClick={addTag}>Tag</Button>\n      </Paper>\n      {newTag && tagElement(newTag)}\n      {tags.map((tag, index) => tagElement(tag, index))}\n    </React.Fragment>\n  );\n};\n\nexport { TaggingController };\n'))),(0,r.kt)(i.Z,{value:"TypeScript",label:"TypeScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/TaggingController.tsx"',title:'"src/5.tagging/TaggingController.tsx"'},'import * as THREE from "three";\nimport React, { FC, useState, useCallback } from "react";\nimport { useFiveEventCallback, useFiveProject2d } from "@realsee/five/react";\nimport Button from "@mui/material/Button";\nimport Paper from "@mui/material/Paper";\n\n/**\n * React Component: Tag\n */\nconst TaggingController: FC = () => {\n  type Tag = { position?: THREE.Vector3; label: string };\n  const project2d = useFiveProject2d();\n\n  const [tags, setTags] = useState<Tag[]>([]);\n  const [newTag, setNewTag] = useState<Tag | null>(null);\n\n  const tagElement = useCallback((tag, key?: number | string) => {\n    const position = tag.position && project2d(tag.position, true);\n    const style = position\n      ? { left: position.x, top: position.y }\n      : { display: "none" };\n    return (\n      <div className="tag" style={style} key={key}>\n        <div className="tag-pannel">\n          <span className="tag-content">{tag.label}</span>\n        </div>\n      </div>\n    );\n  }, []);\n\n  const addTag = useCallback(() => {\n    setNewTag({ label: window.prompt("Add Tag", "") || "Untitled" });\n  }, []);\n\n  useFiveEventCallback(\n    "intersectionOnModelUpdate",\n    (intersect) => {\n      if (newTag) setNewTag({ position: intersect.point, label: newTag.label });\n    },\n    [newTag]\n  );\n\n  useFiveEventCallback(\n    "wantsTapGesture",\n    (raycaster) => {\n      if (newTag && newTag.position) {\n        setTags((tags) => tags.concat(newTag));\n        setNewTag(null);\n        return false;\n      }\n    },\n    [newTag]\n  );\n\n  return (\n    <React.Fragment>\n      <Paper sx={{ position: "fixed", top: 10, left: 10 }}>\n        <Button onClick={addTag}>Tag</Button>\n      </Paper>\n      {newTag && tagElement(newTag)}\n      {tags.map((tag, index) => tagElement(tag, index))}\n    </React.Fragment>\n  );\n};\n\nexport { TaggingController };\n')))),(0,r.kt)("h3",{id:"use-tag-component"},"Use Tag Component"),(0,r.kt)("p",null,"Insert into ",(0,r.kt)("strong",{parentName:"p"},"App")," file ",(0,r.kt)("strong",{parentName:"p"},"GiveProvider")),(0,r.kt)(a.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"JavaScript",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/5.tagging/App.jsx"',title:'"src/5.tagging/App.jsx"'},'import React from "react";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { useFetchWork } from "./useFetchWork";\nimport { useWindowDimensions } from "./useWindowDimensions";\nimport { ModeController } from "./ModeController";\n// highlight-start\nimport { TaggingController } from "./TaggingController";\n// highlight-end\n\n/** work. The data URL */\nconst workURL =\n  "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\nconst App = () => {\n  const work = useFetchWork(workURL);\n  const size = useWindowDimensions();\n  return (\n    work && (\n      <FiveProvider initialWork={work}>\n        <FiveCanvas {...size} />\n        <ModeController />\n        // highlight-start\n        <TaggingController />\n        // highlight-end\n      </FiveProvider>\n    )\n  );\n};\n\nexport { App };\n'))),(0,r.kt)(i.Z,{value:"TypeScript",label:"TypeScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/5.tagging/App.tsx"',title:'"src/5.tagging/App.tsx"'},'import React, { FC } from "react";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { useFetchWork } from "./useFetchWork";\nimport { useWindowDimensions } from "./useWindowDimensions";\nimport { ModeController } from "./ModeController";\n// highlight-start\nimport { TaggingController } from "./TaggingController";\n// highlight-end\n\n/*_ work. The data URL _*/\nconst workURL =\n  "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\nconst App: FC = () => {\n  const work = useFetchWork(workURL);\n  const size = useWindowDimensions();\n  return (\n    work && (\n      <FiveProvider initialWork={work}>\n        <FiveCanvas {...size} />\n        <ModeController />\n        // highlight-start\n        <TaggingController />\n        // highlight-end\n      </FiveProvider>\n    )\n  );\n};\n\nexport { App };\n')))),(0,r.kt)("p",null,"Returning to your browser for viewing will find tabs in the upper left corner of your page, click on, fill in the tag name, move the mouse, click in the position you need and place the tag."),(0,r.kt)("p",null,"Well, it is a functional feature: partying_face:"))}u.isMDXComponent=!0}}]);