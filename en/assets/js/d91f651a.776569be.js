"use strict";(self.webpackChunkrealsee_developer_github_com=self.webpackChunkrealsee_developer_github_com||[]).push([[4834],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>h});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),c=p(n),u=r,h=c["".concat(l,".").concat(u)]||c[u]||d[u]||a;return n?o.createElement(h,i(i({ref:t},m),{},{components:n})):o.createElement(h,i({ref:t},m))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(67294),r=n(86010);const a={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:n,className:i}=e;return o.createElement("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,i),hidden:n},t)}},65488:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(87462),r=n(67294),a=n(86010),i=n(72389),s=n(67392),l=n(7094),p=n(12466);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function c(e){const{lazy:t,block:n,defaultValue:i,values:c,groupId:d,className:u}=e,h=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=c??h.map((e=>{let{props:{value:t,label:n,attributes:o}}=e;return{value:t,label:n,attributes:o}})),w=(0,s.l)(k,((e,t)=>e.value===t.value));if(w.length>0)throw new Error(`Docusaurus error: Duplicate values "${w.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const g=null===i?i:i??h.find((e=>e.props.default))?.props.value??h[0].props.value;if(null!==g&&!k.some((e=>e.value===g)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${g}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:f}=(0,l.U)(),[b,N]=(0,r.useState)(g),C=[],{blockElementScrollPositionUntilNextRender:y}=(0,p.o5)();if(null!=d){const e=v[d];null!=e&&e!==b&&k.some((t=>t.value===e))&&N(e)}const x=e=>{const t=e.currentTarget,n=C.indexOf(t),o=k[n].value;o!==b&&(y(t),N(o),null!=d&&f(d,String(o)))},F=e=>{let t=null;switch(e.key){case"Enter":x(e);break;case"ArrowRight":{const n=C.indexOf(e.currentTarget)+1;t=C[n]??C[0];break}case"ArrowLeft":{const n=C.indexOf(e.currentTarget)-1;t=C[n]??C[C.length-1];break}}t?.focus()};return r.createElement("div",{className:(0,a.Z)("tabs-container",m.tabList)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},u)},k.map((e=>{let{value:t,label:n,attributes:i}=e;return r.createElement("li",(0,o.Z)({role:"tab",tabIndex:b===t?0:-1,"aria-selected":b===t,key:t,ref:e=>C.push(e),onKeyDown:F,onClick:x},i,{className:(0,a.Z)("tabs__item",m.tabItem,i?.className,{"tabs__item--active":b===t})}),n??t)}))),t?(0,r.cloneElement)(h.filter((e=>e.props.value===b))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},h.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==b})))))}function d(e){const t=(0,i.Z)();return r.createElement(c,(0,o.Z)({key:String(t)},e))}},90256:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>p,toc:()=>c});var o=n(87462),r=(n(67294),n(3905)),a=n(65488),i=n(85162);const s={title:"Change View"},l=void 0,p={unversionedId:"front/3d-space/handbook/react-hoc/knowing-state",id:"front/3d-space/handbook/react-hoc/knowing-state",title:"Change View",description:"Previous chapter recalls: Show 3D space",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/front/3d-space/handbook/react-hoc/2.knowing-state.md",sourceDirName:"front/3d-space/handbook/react-hoc",slug:"/front/3d-space/handbook/react-hoc/knowing-state",permalink:"/en/docs/front/3d-space/handbook/react-hoc/knowing-state",draft:!1,tags:[],version:"current",lastUpdatedBy:"sansi.lcj",lastUpdatedAt:1669717185,formattedLastUpdatedAt:"Nov 29, 2022",sidebarPosition:2,frontMatter:{title:"Change View"},sidebar:"\u4e09\u7ef4\u7a7a\u95f4",previous:{title:"Show 3D space",permalink:"/en/docs/front/3d-space/handbook/react-hoc/displaying-work"},next:{title:"Status Recording",permalink:"/en/docs/front/3d-space/handbook/react-hoc/recording-state"}},m={},c=[{value:"Preparatory work",id:"preparatory-work",level:2},{value:"What is State",id:"what-is-state",level:2},{value:"State Introduction",id:"state-introduction",level:3},{value:"State Data Structure and Description",id:"state-data-structure-and-description",level:3},{value:"What is associated with the API",id:"what-is-associated-with-the-api",level:3},{value:"State / currentState Distinction",id:"state--currentstate-distinction",level:3},{value:"Development of an auto-ring feature",id:"development-of-an-auto-ring-feature",level:2},{value:"Writing ring Component",id:"writing-ring-component",level:3},{value:"Use Auto-Ring Component",id:"use-auto-ring-component",level:3},{value:"The next section will be completed by you",id:"the-next-section-will-be-completed-by-you",level:2}],d={toc:c},u="wrapper";function h(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Previous chapter recalls: Show 3D space")," ",(0,r.kt)("br",null)," "),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"You know what you are ",(0,r.kt)("strong",{parentName:"li"},"Work"),", and how to get and load.",(0,r.kt)("br",null)," "),(0,r.kt)("li",{parentName:"ul"},"How to display three-dimensional spaces and develop components again to control three-dimensional space."))),(0,r.kt)("admonition",{title:"This chapter can learn to",type:"tip"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Learn what is State."),(0,r.kt)("li",{parentName:"ul"},"How to change the directions/position of 3D space observation."),(0,r.kt)("li",{parentName:"ul"},"Learn how to work with the code of the previous chapter, e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"currentState")," ",(0,r.kt)("inlineCode",{parentName:"li"},"setState")," and others."),(0,r.kt)("li",{parentName:"ul"},"Autoring features via ",(0,r.kt)("strong",{parentName:"li"},"State"),"."))),(0,r.kt)("h2",{id:"preparatory-work"},"Preparatory work"),(0,r.kt)("p",null,"Like the previous section, we create a new directory (",(0,r.kt)("inlineCode",{parentName:"p"},"src/2.knowing-state"),"and corresponding ",(0,r.kt)("strong",{parentName:"p"},"html")," and ",(0,r.kt)("strong",{parentName:"p"},"jsx")," or ",(0,r.kt)("strong",{parentName:"p"},"tsx")," files."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"jsx")," or ",(0,r.kt)("strong",{parentName:"p"},"tsx")," files can first copy the previous chapter."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="src/2.knowing-state/index.html"',title:'"src/2.knowing-state/index.html"'},'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <link rel="icon" href="data:;base64,iVBORw0KGgo=">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>Shift view | Klowing state</title>\n  <style>\n    * { margin: 0; padding: 0; }\n    html, body #app { width: 100%; height: 100%; overflow: hidden; }\n  </style>\n</head>\n<body>\n  <div id="app"></div>\n  <script type="module" src="./index"><\/script>\n</body>\n</html>\n')),(0,r.kt)(a.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"JavaScript",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"src/2.knowing-state/withFetchWork.jsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'import { useState, useEffect } from "react";\nimport { parseWork } from "@realsee/five";\n\n/**\n * React Hook: via work .json address get work object\n * @param url work.json data address\n * @returns work object, if getting, return null\n */\n function useFetchWork(url) {\n  const [work, setWork] = useState(null);\n  useEffect(() => {\n    setWork(null);\n    fetch(url)\n      .then(response => response.text())\n      .then(text => setWork(parseWork(text)));\n  },[url]);\n  return work;\n}\n\nexport { useFetchWork };\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"src/2.knowing-state/withWindowDimensions.js")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'import React, { Component } from "react";\n\n/**\n * React HOC: Get the size of the current window\n */\nfunction withWindowDimensions() {\n  return function(Compnent) {\n    return class extends Component {\n      state = this.getWindowDimensions();\n      resizeListener = () => {\n        this.setState(this.getWindowDimensions());\n      };\n      getWindowDimensions() {\n        return { width: window.innerWidth, height: window.innerHeight };\n      }\n      componentDidMount() {\n        window.addEventListener("resize", this.resizeListener, false);\n      }\n      componentWillUnmount() {\n        window.removeEventListener("resize", this.resizeListener, false);\n      }\n      render() {\n        const dimensions = { width: this.state.width, height: this.state.height };\n        return <Compnent windowDimensions={dimensions} {...this.props}/>;\n      }\n    }\n  }\n}\n\nexport { withWindowDimensions };\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"src/2.knowing-state/ModeController.jsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'import React, { Component } from "react";\nimport { Five } from "@realsee/five";\nimport { withFive, createFiveFeature } from "@realsee/five/react";\nimport { compose } from "@wordpress/compose";\nimport BottomNavigation from "@mui/material/BottomNavigation";\nimport BottomNavigationAction from "@mui/material/BottomNavigationAction";\nimport Paper from "@mui/material/Paper";\nimport DirectionsWalkIcon from "@mui/icons-material/DirectionsWalk";\nimport ViewInArIcon from "@mui/icons-material/ViewInAr";\n\nconst FEATURES = createFiveFeature("currentState", "setState");\n\n/**\n * React Component: Modal Control\n */\nconst ModeController = compose(\n  withFive(FEATURES)\n)(class extends Component {\n  render() {\n    return <Paper sx={{ position: "fixed", bottom: 0, left: 0, right: 0 }}>\n      <BottomNavigation\n        showLabels\n        value={this.props.$five.currentState.mode}\n        onChange={(_, newValue) => {\n          this.props.$five.setState({ mode: newValue });\n        }}\n      >\n        <BottomNavigationAction label="Panorama roaming" icon={<DirectionsWalkIcon/>} value={Five.Mode.Panorama}/>\n        <BottomNavigationAction label="Space overview" icon={<ViewInArIcon/>} value={Five.Mode.Floorplan}/>\n      </BottomNavigation>\n    </Paper>;\n  }\n})\n\nexport { ModeController };\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"src/2.knowing-state/App.jsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'import React, { Component } from "react";\nimport { compose } from "@wordpress/compose";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { withFetchWork } from "./withFetchWork";\nimport { withWindowDimensions } from "./withWindowDimensions";\nimport { ModeController } from "./ModeController";\n\n/** Data URL of work.json */\nconst workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\n\nconst App = compose(\n  withFetchWork(workURL),\n  withWindowDimensions()\n)(class extends Component {\n  render() {\n    const { work, windowDimensions } = this.props;\n    return <FiveProvider initialWork={work}>\n      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>\n      <ModeController/>;\n    </FiveProvider>;\n  }\n});\n\nexport { App };\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"src/2.knowing-state/index.jsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'import React from "react";\nimport ReactDOM from "react-dom";\nimport { App } from "./App";\n\nReactDOM.render(<App/>, document.querySelector("#app"));\n\nexport {};\n'))),(0,r.kt)(i.Z,{value:"TypeScript",label:"TypeScript",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"src/2.knowing-state/withFetchWork.tsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import React, { Component, ComponentClass } from "react";\nimport { Work, parseWork } from "@realsee/five";\n\n/**\n * React HOC get work\n * @param url work. Son address\n */\nfunction withFetchWork<P extends Record<string, any>>(url: string) {\n  return function(Compnent: ComponentClass<P & { work: Work }>): ComponentClass<P> {\n    return class extends Component<P, {work: Work | null}> {\n      state = { work: null };\n      componentDidMount() {\n        fetch(url).then(res => res.json()).then(json => {\n          this.setState({ work: parseWork(json) });\n        });\n      }\n      render() {\n        if (this.state.work === null) return null;\n        return <Compnent work={this.state.work} {...this.props}/>;\n      }\n    }\n  }\n}\n\nexport { withFetchWork };\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"src/2.knowing-state/useWindowDimensions.tsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import React, { Component, ComponentClass } from "react";\n\n/**\n * React HOC: Get the current window size\n */\nfunction withWindowDimensions<P extends Record<string, any>>() {\n  return function(Compnent: ComponentClass<P & { windowDimensions: { width: number, height: number} }>): ComponentClass<P> {\n    return class extends Component<P, {width: number, height: number}> {\n      state = this.getWindowDimensions();\n      resizeListener = () => {\n        this.setState(this.getWindowDimensions());\n      };\n      getWindowDimensions() {\n        return { width: window.innerWidth, height: window.innerHeight };\n      }\n      componentDidMount() {\n        window.addEventListener("resize", this.resizeListener, false);\n      }\n      componentWillUnmount() {\n        window.removeEventListener("resize", this.resizeListener, false);\n      }\n      render() {\n        const dimensions = { width: this.state.width, height: this.state.height };\n        return <Compnent windowDimensions={dimensions} {...this.props}/>;\n      }\n    }\n  }\n}\n\nexport { withWindowDimensions };\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"src/2.knowing-state/ModeController.tsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import React, { Component } from "react";\nimport { Five, Mode } from "@realsee/five";\nimport { withFive, createFiveFeature, PropTypeOfFiveFeatures } from "@realsee/five/react";\nimport { compose } from "@wordpress/compose";\nimport BottomNavigation from "@mui/material/BottomNavigation";\nimport BottomNavigationAction from "@mui/material/BottomNavigationAction";\nimport Paper from "@mui/material/Paper";\nimport DirectionsWalkIcon from "@mui/icons-material/DirectionsWalk";\nimport ViewInArIcon from "@mui/icons-material/ViewInAr";\n\nconst FEATURES = createFiveFeature("currentState", "setState");\ntype Props = PropTypeOfFiveFeatures<typeof FEATURES>;\n\n/**\n * React Component: Model Control\n */\nconst ModeController = compose(\n  withFive(FEATURES)\n)(class extends Component<Props> {\n  render() {\n    return <Paper sx={{ position: "fixed", bottom: 0, left: 0, right: 0 }}>\n      <BottomNavigation\n        showLabels\n        value={this.props.$five.currentState.mode}\n        onChange={(_, newValue: Mode) => {\n          this.props.$five.setState({ mode: newValue });\n        }}\n      >\n        <BottomNavigationAction label="Panorama roaming" icon={<DirectionsWalkIcon/>} value={Five.Mode.Panorama}/>\n        <BottomNavigationAction label="Space overview" icon={<ViewInArIcon/>} value={Five.Mode.Floorplan}/>\n      </BottomNavigation>\n    </Paper>;\n  }\n})\n\nexport { ModeController };\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"src/2.knowing-state/App.tsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import React, { Component } from "react";\nimport { Work } from "@realsee/five";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { compose } from "@wordpress/compose";\nimport { withFetchWork } from "./withFetchWork";\nimport { withWindowDimensions } from "./withWindowDimensions";\nimport { ModeController } from "./ModeController";\n\n/** Data URL of work.json */\nconst workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\n\nconst App = compose(\n  withFetchWork(workURL),\n  withWindowDimensions()\n)(class extends Component<{work: Work, windowDimensions: { width: number, height: number }}> {\n  render() {\n    const { work, windowDimensions } = this.props;\n    return <FiveProvider initialWork={work}>\n      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>\n      <ModeController/>\n    </FiveProvider>;\n  }\n});\n\n\nexport { App };\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"src/2.knowing-state/index.tsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import React from "react";\nimport ReactDOM from "react-dom";\nimport { App } from "./App";\n\nReactDOM.render(<App/>, document.querySelector("#app"));\n\nexport {};\n')))),(0,r.kt)("p",null,"Start service ",(0,r.kt)("inlineCode",{parentName:"p"},"npm run dev"),' and jump to the current page "http://localhost:3000/src/2.knowing-state/index.html".'),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Please see your console. The port number will change due to your configuration and current port occupancy, please check the console output. If you use another development build tool, please start the service as required by your own development build tool.")),(0,r.kt)("h2",{id:"what-is-state"},"What is State"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Having come to understand the concept, I assure you that you are only the last theory that needs to be known at this stage.")),(0,r.kt)("h3",{id:"state-introduction"},"State Introduction"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"State")," data structure used to describe status.The previous chapter knows ",(0,r.kt)("strong",{parentName:"p"},"Work"),", ",(0,r.kt)("strong",{parentName:"p"},"Work")," is used to describe a three-dimensional space, then ",(0,r.kt)("strong",{parentName:"p"},"State")," is a description of what is currently in this three-dimensional space.He contains modelling, where the collection point is located, the direction of the camera, and the view of the camera."),(0,r.kt)("h3",{id:"state-data-structure-and-description"},"State Data Structure and Description"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'interface State {\n  "mode": Five.Mode,\n  "panoIndex": number,\n  "longitude": number,\n  "latitude": number,\n  "fov": number,\n  "offset": THEEE.Vector3\n}\n')),(0,r.kt)("p",null,"Data description for ",(0,r.kt)("strong",{parentName:"p"},"State")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"mode"),": Current mode common to 5 models that can be obtained using ",(0,r.kt)("inlineCode",{parentName:"p"},"Five.Mode")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Panorama: Panorama: Panoramic Walking Model, under which views will travel between collection points. Gestures can rotation/amplify views/toggle collection points to view the collected landscape information."),(0,r.kt)("li",{parentName:"ul"},"Floorplan: Space Overview Model. The view under this model is model-centric, gesture can rotate/magnify models/toggle the floor to view the model as a whole."),(0,r.kt)("li",{parentName:"ul"},"Topview: Household diagram mode where the view is centered on the model, vertical pitch model, gesture can shift/zoom in the floor/toggle the floor of the model to view the schema structure."),(0,r.kt)("li",{parentName:"ul"},"Model: Modeling Model, where the view will travel freely in the model, gesture can rotate/amplify views/bits, fit to view the details of the model and make some locational actions."),(0,r.kt)("li",{parentName:"ul"},"VR Panorama: VR glasses model that enables VR virtual display using ",(0,r.kt)("a",{parentName:"li",href:"https://arvr.google.com/cardboard/"},"Cardboard glass")," or his third-party derivative product."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"panoIndex"),": Gathering point positions, where Panorama models can be set up.is an index of ",(0,r.kt)("inlineCode",{parentName:"p"},"work[observers]"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"longitude")," / ",(0,r.kt)("inlineCode",{parentName:"p"},"latitude"),": Horizontal corner of the camera/camera (radians), we describe the position of the camera in a latitude similar way."),(0,r.kt)("p",{parentName:"li"},"The whole model scenario is a right-hand cartex coordinate system, ",(0,r.kt)("inlineCode",{parentName:"p"},"XZ"),"plane parallel to the ground, ",(0,r.kt)("inlineCode",{parentName:"p"},"Y"),"axis perpendicular to the ground."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{parentName:"p",src:"https://vrlab-public.ljcdn.com/common/file/web/2f331826-4b15-4da5-9603-50c1287b38f7.svg",alt:"Right cursor icon"})),(0,r.kt)("p",{parentName:"li"},"Initial camera orientation looks at ",(0,r.kt)("strong",{parentName:"p"},"Z negative direction")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Add ",(0,r.kt)("inlineCode",{parentName:"li"},"longitude")," camera rotate left."),(0,r.kt)("li",{parentName:"ul"},"Decrease ",(0,r.kt)("inlineCode",{parentName:"li"},"longitude")," camera rotate right."),(0,r.kt)("li",{parentName:"ul"},"Add ",(0,r.kt)("inlineCode",{parentName:"li"},"latitude")," camera rotate down."),(0,r.kt)("li",{parentName:"ul"},"Reduces the rotation of ",(0,r.kt)("inlineCode",{parentName:"li"},"latitude")," cameras.")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"fov"),": Visual angle (angle) in the vertical direction of camera.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"offset"),": three-dimensional coordinates of the current camera."))),(0,r.kt)("h3",{id:"what-is-associated-with-the-api"},"What is associated with the API"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://unpkg.com/@realsee/five/docs/modules/react.html#useFiveState"},(0,r.kt)("inlineCode",{parentName:"a"},"[state, setState] = useFiveState;"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://unpkg.com/@realsee/five/docs/modules/react.html#useFiveCurrentState"},(0,r.kt)("inlineCode",{parentName:"a"},"[currentState, setCurrentState] = useFiveCurrentState;")))),(0,r.kt)("p",null,"The current state can be obtained by ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," ",(0,r.kt)("inlineCode",{parentName:"p"},"currentState")," , set by ",(0,r.kt)("inlineCode",{parentName:"p"},"setState")," ",(0,r.kt)("inlineCode",{parentName:"p"},"setCurrentState")),(0,r.kt)("h3",{id:"state--currentstate-distinction"},"State / currentState Distinction"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"currentState")," is the current state, the state in the picture, the state that is currently shown. ",(0,r.kt)("strong",{parentName:"p"},"state")," is targeted or stable at the next time."),(0,r.kt)("p",null,"It can be simply thought of as: ",(0,r.kt)("br",null)," When ",(0,r.kt)("strong",{parentName:"p"},"setSate")," is called,",(0,r.kt)("strong",{parentName:"p"},"state")," will immediately become the value of ",(0,r.kt)("strong",{parentName:"p"},"setState")," , while ",(0,r.kt)("strong",{parentName:"p"},"currentState")," will not change immediately, it will gradually approach ",(0,r.kt)("strong",{parentName:"p"},"during the animation transition process state")," and eventually becomes the same value as  ",(0,r.kt)("strong",{parentName:"p"},"state"),".Just like the animation you see in the screen."),(0,r.kt)("p",null,"In the example of the last chapter, we have used ",(0,r.kt)("strong",{parentName:"p"},"mode")," properties to switch to ",(0,r.kt)("strong",{parentName:"p"},"Panorama")," and ",(0,r.kt)("strong",{parentName:"p"},"Floorplan")," patterns.You can also try to add some of the other models and see how different they are."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"VRPanorama mode"),"requires device gyroscopic information and mobile devices. And if the service is ",(0,r.kt)("strong",{parentName:"p"},"iOS")," device, it needs to be ",(0,r.kt)("inlineCode",{parentName:"p"},"https")," or ",(0,r.kt)("strong",{parentName:"p"},"iOS")," does not allow access to Gychrome information.")),(0,r.kt)("h2",{id:"development-of-an-auto-ring-feature"},"Development of an auto-ring feature"),(0,r.kt)("p",null,"We've fetched and set ",(0,r.kt)("strong",{parentName:"p"},"mode"),", this time we've modified ",(0,r.kt)("strong",{parentName:"p"},"longitude / latitude"),".This time we develop an auto-look feature.Use a button to control the function of activating auto-ring viewing, which will rotate the camera horizontally."),(0,r.kt)("h3",{id:"writing-ring-component"},"Writing ring Component"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Add a ",(0,r.kt)("strong",{parentName:"li"},"LookAroundController")," file to write components."),(0,r.kt)("li",{parentName:"ol"},"Designing ",(0,r.kt)("strong",{parentName:"li"},"active")," React state to control whether or not React state features are enabled for display of buttons."),(0,r.kt)("li",{parentName:"ol"},"The ring function is implemented with\uff1atriggering function via setInterval, modifying the five ",(0,r.kt)("strong",{parentName:"li"},"state"),".")),(0,r.kt)(a.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"JavaScript",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/2.knowing-state/LookAroundController.jsx"',title:'"src/2.knowing-state/LookAroundController.jsx"'},'import React, { Component } from "react";\nimport { withFive, createFiveFeature } from "@realsee/five/react";\nimport { compose } from "@wordpress/compose";\nimport IconButton from "@mui/material/IconButton";\nimport Paper from "@mui/material/Paper";\nimport FlipCameraAndroidIcon from "@mui/icons-material/FlipCameraAndroid";\nimport PauseIcon from "@mui/icons-material/Pause";\n\nconst FEATURES = createFiveFeature("currentState", "setState");\n\n/**\n * ReactComponent: Automatic lookaround button\n */\nconst LookAroundController = compose(\n  withFive(FEATURES)\n)(class extends Component {\n\n  timer;\n  state = { active: false };\n\n  toggleActive(active) {\n    window.clearInterval(this.timer);\n    this.setState({ active });\n    if (active === true) {\n      this.timer = window.setInterval(() => {\n        this.props.$five.setState({\n          longitude: this.props.$five.currentState.longitude + Math.PI / 360\n        });\n      }, 16);\n    } else {\n      delete this.timer;\n    }\n  }\n  render() {\n    return <Paper sx={{ position: "fixed", top: 10, right: 10 }}>\n    {this.state.active ?\n      <IconButton onClick={() => this.toggleActive(false)}><PauseIcon/></IconButton>:\n      <IconButton onClick={() => this.toggleActive(true)}><FlipCameraAndroidIcon/></IconButton>\n    }\n    </Paper>;\n  }\n});\n\nexport { LookAroundController };\n'))),(0,r.kt)(i.Z,{value:"TypeScript",label:"TypeScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/2.knowing-state/LookAroundController.tsx"',title:'"src/2.knowing-state/LookAroundController.tsx"'},'import React, { Component } from "react";\nimport { withFive, createFiveFeature, PropTypeOfFiveFeatures } from "@realsee/five/react";\nimport { compose } from "@wordpress/compose";\nimport IconButton from "@mui/material/IconButton";\nimport Paper from "@mui/material/Paper";\nimport FlipCameraAndroidIcon from "@mui/icons-material/FlipCameraAndroid";\nimport PauseIcon from "@mui/icons-material/Pause";\n\nconst FEATURES = createFiveFeature("currentState", "setState");\ntype Props = PropTypeOfFiveFeatures<typeof FEATURES>;\ntype State = { active: boolean };\n\n/**\n * ReactComponent: Automatic lookaround button\n */\nconst LookAroundController = compose(\n  withFive(FEATURES)\n)(class extends Component<Props, State> {\n\n  timer?: number;\n  state = { active: false };\n\n  toggleActive(active: boolean) {\n    window.clearInterval(this.timer);\n    this.setState({ active });\n    if (active === true) {\n      this.timer = window.setInterval(() => {\n        this.props.$five.setState({\n          longitude: this.props.$five.currentState.longitude + Math.PI / 360\n        });\n      }, 16);\n    } else {\n      delete this.timer;\n    }\n  }\n  render() {\n    return <Paper sx={{ position: "fixed", top: 10, right: 10 }}>\n    {this.state.active ?\n      <IconButton onClick={() => this.toggleActive(false)}><PauseIcon/></IconButton>:\n      <IconButton onClick={() => this.toggleActive(true)}><FlipCameraAndroidIcon/></IconButton>\n    }\n    </Paper>;\n  }\n});\n\nexport { LookAroundController };\n')))),(0,r.kt)("h3",{id:"use-auto-ring-component"},"Use Auto-Ring Component"),(0,r.kt)("p",null,"Insert into ",(0,r.kt)("strong",{parentName:"p"},"App")," file ",(0,r.kt)("strong",{parentName:"p"},"GiveProvider")),(0,r.kt)(a.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"JavaScript",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/2.knowing-state/App.jsx"',title:'"src/2.knowing-state/App.jsx"'},'import React, { Component } from "react";\nimport { compose } from "@wordpress/compose";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { withFetchWork } from "./withFetchWork";\nimport { withWindowDimensions } from "./withWindowDimensions";\nimport { ModeController } from "./ModeController";\n// highlight-start\nimport { LookAroundController } from "./LookAroundController";\n// highlight-end\n\n/** Data URL of work.json */\nconst workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\n\nconst App = compose(\n  withFetchWork(workURL),\n  withWindowDimensions()\n)(class extends Component {\n  render() {\n    const { work, windowDimensions } = this.props;\n    return <FiveProvider initialWork={work}>\n      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>\n      <ModeController/>;\n      // highlight-start\n      <LookAroundController/>;\n      // highlight-end\n    </FiveProvider>;\n  }\n});\n\nexport { App };\n'))),(0,r.kt)(i.Z,{value:"TypeScript",label:"TypeScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/2.knowing-state/App.tsx"',title:'"src/2.knowing-state/App.tsx"'},'import React, { Component } from "react";\nimport { Work } from "@realsee/five";\nimport { createFiveProvider, FiveCanvas } from "@realsee/five/react";\nimport { compose } from "@wordpress/compose";\nimport { withFetchWork } from "./withFetchWork";\nimport { withWindowDimensions } from "./withWindowDimensions";\nimport { ModeController } from "./ModeController";\n// highlight-start\nimport { LookAroundController } from "./LookAroundController";\n// highlight-end\n\n/** Data URL of work.json */\nconst workURL = "https://vrlab-public.ljcdn.com/release/static/image/release/five/work-sample/07bdc58f413bc5494f05c7cbb5cbdce4/work.json";\n\nconst FiveProvider = createFiveProvider();\n\nconst App = compose(\n  withFetchWork(workURL),\n  withWindowDimensions()\n)(class extends Component<{work: Work, windowDimensions: { width: number, height: number }}> {\n  render() {\n    const { work, windowDimensions } = this.props;\n    return <FiveProvider initialWork={work}>\n      <FiveCanvas width={windowDimensions.width} height={windowDimensions.height}/>\n      <ModeController/>\n      // highlight-start\n      <LookAroundController/>\n      // highlight-end\n    </FiveProvider>;\n  }\n});\n\n\nexport { App };\n')))),(0,r.kt)("p",null,"Back to your browser to view it will find a ring button in the top right corner of your page.Click to trigger and close the ring view."),(0,r.kt)("p",null,"It's a good feature: partying_face: !"),(0,r.kt)("h2",{id:"the-next-section-will-be-completed-by-you"},"The next section will be completed by you"),(0,r.kt)("admonition",{title:"Next chapter we use the State to perform some complex functions that will deepen the capabilities of the State.",type:"tip"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Record using ",(0,r.kt)("strong",{parentName:"li"},"State")," to complete user operations"),(0,r.kt)("li",{parentName:"ul"},"Restore user screen via ",(0,r.kt)("strong",{parentName:"li"},"State")))))}h.isMDXComponent=!0}}]);